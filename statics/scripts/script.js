(function(p,C){var t="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),w=/^([\-+])=\s*(\d+\.?\d*)/,z=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],B=p.Color=function(c,b,d,a){return new p.Color.fn.parse(c,b,d,a)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},q={"byte":{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},r=B.support={},E=p("<p>")[0],F,s=p.each;E.style.cssText="background-color:rgba(1,1,1,.5)";r.rgba=E.style.backgroundColor.indexOf("rgba")>-1;s(u,function(b,a){a.cache="_"+b;a.props.alpha={idx:3,type:"percent",def:1}});function v(c,a,b){var d=q[a.type]||{};if(c==null){return(b||!a.def)?null:a.def}c=d.floor?~~c:parseFloat(c);if(isNaN(c)){return a.def}if(d.mod){return(c+d.mod)%d.mod}return 0>c?0:d.max<c?d.max:c}function A(c){var a=B(),b=a._rgba=[];c=c.toLowerCase();s(z,function(e,d){var g,f=d.re.exec(c),h=f&&d.parse(f),j=d.space||"rgba";if(h){g=a[j](h);a[u[j].cache]=g[u[j].cache];b=a._rgba=g._rgba;return false}});if(b.length){if(b.join()==="0,0,0,0"){p.extend(b,F.transparent)}return a}return F[c]}B.fn=p.extend(B.prototype,{parse:function(a,c,h,b){if(a===C){this._rgba=[null,null,null,null];return this}if(a.jquery||a.nodeType){a=p(a).css(c);c=C}var d=this,f=p.type(a),g=this._rgba=[],e;if(c!==C){a=[a,c,h,b];f="array"}if(f==="string"){return this.parse(A(a)||F._default)}if(f==="array"){s(u.rgba.props,function(j,k){g[k.idx]=v(a[k.idx],k)});return this}if(f==="object"){if(a instanceof B){s(u,function(j,k){if(a[k.cache]){d[k.cache]=a[k.cache].slice()}})}else{s(u,function(j,k){s(k.props,function(l,n){var m=k.cache;if(!d[m]&&k.to){if(l==="alpha"||a[l]==null){return}d[m]=k.to(d._rgba)}d[m][n.idx]=v(a[l],n,true)})})}return this}},is:function(b){var d=B(b),a=true,c=this;s(u,function(h,f){var e,g=d[f.cache];if(g){e=c[f.cache]||f.to&&f.to(c._rgba)||[];s(f.props,function(j,k){if(g[k.idx]!=null){a=(g[k.idx]===e[k.idx]);return a}})}return a});return a},_space:function(){var b=[],a=this;s(u,function(d,c){if(a[c.cache]){b.push(d)}});return b.pop()},transition:function(g,a){var f=B(g),e=f._space(),d=u[e],c=this.alpha()===0?B("transparent"):this,b=c[d.cache]||d.to(c._rgba),h=b.slice();f=f[d.cache];s(d.props,function(k,m){var l=m.idx,o=b[l],j=f[l],n=q[m.type]||{};if(j===null){return}if(o===null){h[l]=j}else{if(n.mod){if(j-o>n.mod/2){o+=n.mod}else{if(o-j>n.mod/2){o-=n.mod}}}h[l]=v((j-o)*a+o,m)}});return this[e](h)},blend:function(a){if(this._rgba[3]===1){return this}var b=this._rgba.slice(),c=b.pop(),d=B(a)._rgba;return B(p.map(b,function(f,e){return(1-c)*d[e]+c*f}))},toRgbaString:function(){var a="rgba(",b=p.map(this._rgba,function(d,c){return d==null?(c>2?1:0):d});if(b[3]===1){b.pop();a="rgb("}return a+b.join()+")"},toHslaString:function(){var a="hsla(",b=p.map(this.hsla(),function(d,c){if(d==null){d=c>2?1:0}if(c&&c<3){d=Math.round(d*100)+"%"}return d});if(b[3]===1){b.pop();a="hsl("}return a+b.join()+")"},toHexString:function(c){var b=this._rgba.slice(),a=b.pop();if(c){b.push(~~(a*255))}return"#"+p.map(b,function(e,d){e=(e||0).toString(16);return e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});B.fn.parse.prototype=B.fn;function D(a,b,c){c=(c+1)%1;if(c*6<1){return a+(b-a)*c*6}if(c*2<1){return b}if(c*3<2){return a+(b-a)*((2/3)-c)*6}return a}u.hsla.to=function(m){if(m[0]==null||m[1]==null||m[2]==null){return[null,null,null,m[3]]}var d=m[0]/255,j=m[1]/255,h=m[2]/255,f=m[3],g=Math.max(d,j,h),l=Math.min(d,j,h),e=g-l,c=g+l,b=c*0.5,k,a;if(l===g){k=0}else{if(d===g){k=(60*(j-h)/e)+360}else{if(j===g){k=(60*(h-d)/e)+120}else{k=(60*(d-j)/e)+240}}}if(b===0||b===1){a=b}else{if(b<=0.5){a=e/c}else{a=e/(2-c)}}return[Math.round(k)%360,a,b,f==null?1:f]};u.hsla.from=function(h){if(h[0]==null||h[1]==null||h[2]==null){return[null,null,null,h[3]]}var e=h[0]/360,a=h[1],f=h[2],b=h[3],j=f<=0.5?f*(1+a):f+a-f*a,g=2*f-j,k,d,c;return[Math.round(D(g,j,e+(1/3))*255),Math.round(D(g,j,e)*255),Math.round(D(g,j,e-(1/3))*255),b]};s(u,function(e,c){var d=c.props,f=c.cache,a=c.to,b=c.from;B.fn[e]=function(k){if(a&&!this[f]){this[f]=a(this._rgba)}if(k===C){return this[f].slice()}var h,l=p.type(k),j=(l==="array"||l==="object")?k:arguments,g=this[f].slice();s(d,function(m,n){var o=j[l==="object"?m:n.idx];if(o==null){o=g[n.idx]}g[n.idx]=v(o,n)});if(b){h=B(b(g));h[f]=g;return h}else{return B(g)}};s(d,function(h,g){if(B.fn[h]){return}B.fn[h]=function(k){var m=p.type(k),l=(h==="alpha"?(this._hsla?"hsla":"rgba"):e),o=this[l](),n=o[g.idx],j;if(m==="undefined"){return n}if(m==="function"){k=k.call(this,n);m=p.type(k)}if(k==null&&g.empty){return this}if(m==="string"){j=w.exec(k);if(j){k=n+parseFloat(j[2])*(j[1]==="+"?1:-1)}}o[g.idx]=k;return this[l](o)}})});s(t,function(b,a){p.cssHooks[a]={set:function(d,c){var f,g,e;if(p.type(c)!=="string"||(f=A(c))){c=B(f||c);if(!r.rgba&&c._rgba[3]!==1){e=a==="backgroundColor"?d.parentNode:d;do{g=p.css(e,"backgroundColor")}while((g===""||g==="transparent")&&(e=e.parentNode)&&e.style);c=c.blend(g&&g!=="transparent"?g:"_default")}c=c.toRgbaString()}try{d.style[a]=c}catch(c){}}};p.fx.step[a]=function(c){if(!c.colorInit){c.start=B(c.elem,a);c.end=B(c.end);c.colorInit=true}p.cssHooks[a].set(c.elem,c.start.transition(c.end,c.pos))}});F=p.Color.names={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFFFF",transparent:[null,null,null,0],_default:"#FFFFFF"}})(jQuery);(function(b){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");String.prototype.replaceAt=function(d,c){return this.substr(0,d)+c+this.substr(d+c.length)};String.prototype.reverse=function(){return this.split("").reverse().join("")};if(!("indexOf" in Array.prototype)){Array.prototype.indexOf=function(d,c){if(c===undefined){c=0}if(c<0){c+=this.length}if(c<0){c=0}for(var e=this.length;c<e;c++){if(c in this&&this[c]===d){return c}}return -1}}b.extend({random:function(d,c){return Math.floor(Math.random()*(c-d+1)+d)},generateUUID:function(){var e=new Array(36);var d=0;var f;for(var c=0;c<36;++c){if(c==8||c==13||c==18||c==23){e[c]="-"}else{if(c==14){e[c]="4"}else{if(d<=2){d=33554432+(Math.random()*16777216)|0}f=d&15;d=d>>4;e[c]=a[(c==19)?(f&3)|8:f]}}}return e.join("")},cookie:function(j,h,e){var m=b.extend({},e);if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(h))||h===null||h===undefined)){if(h===null||h===undefined){m.expires=-1}if(typeof m.expires==="number"){var k=m.expires;var l=m.expires=new Date();l.setDate(l.getDate()+k)}h=String(h);return(document.cookie=[encodeURIComponent(j),"=",m.raw?h:encodeURIComponent(h),m.expires?"; expires="+m.expires.toUTCString():"",m.path?"; path="+m.path:"",m.domain?"; domain="+m.domain:"",m.secure?"; secure":""].join(""))}var c=m.raw?function(n){return n}:decodeURIComponent;var d=document.cookie.split("; ");m=h||{};for(var g=0,f;f=d[g]&&d[g].split("=");++g){if(c(f[0])===j){return c(f[1]||"")}}return null},pause:function(d){var c=new Date();var e=null;do{e=new Date()}while(e-c<d)},daysInMonth:function(d,c){return 32-new Date(c,d,32).getDate()}})})(jQuery);(function(d){var b=["DOMMouseScroll","mousewheel"];var c=function(k){var h=k||window.event,g=[].slice.call(arguments,1);var l=0;var f=0;var e=0;var j=true;k=d.event.fix(h);k.type="mousewheel";if(h.wheelDelta){l=h.wheelDelta/120}if(h.detail){l=-1*h.detail/3}e=l;if(h.axis!==undefined&&h.axis===h.HORIZONTAL_AXIS){e=0;f=-1*l}if(h.wheelDeltaY!==undefined){e=h.wheelDeltaY/120}if(h.wheelDeltaX!==undefined){f=-1*h.wheelDeltaX/120}g.unshift(k,l,f,e);return(d.event.dispatch||d.event.handle).apply(this,g)};if(d.event.fixHooks){for(var a=b.length;a;){d.event.fixHooks[b[--a]]=d.event.mouseHooks}}d.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=b.length;e;){this.addEventListener(b[--e],c,false)}}else{this.onmousewheel=c}},teardown:function(){if(this.removeEventListener){for(var e=b.length;e;){this.removeEventListener(b[--e],c,false)}}else{this.onmousewheel=null}}};d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})(jQuery);(function(a){a.pull={};a.pull.pulling=false;a.pull.options={friendcounter:null,onlinecounter:null,browseredcounter:null,counterAnimationSpeed:50,minimumAnimationTimes:4,interval:5000,counterDigitElements:"0123456789"};a.pull.start=function(b){if(!a.pull.pulling){a.pull.pulling=true;a.pull.options=a.extend(a.pull.options,b);a.getJSON(a.configures.pullUrl,{lasttime:a.configures.lasttime},function(d){a.configures.lasttime=d.lasttime;if(d.counter){if(a.pull.options.friendcounter){a.pull.options.friendcounter.text(d.counter.friends)}if(a.pull.options.onlinecounter){a.pull.options.onlinecounter.text(d.counter.online)}if(a.pull.options.browseredcounter){var f=0;var k=0;var h=d.counter.browsered.toString();var g=a.pull.options.browseredcounter.text();if(g.length>h.length){g=""}for(var e=0;e<h.length;++e){if(g[e]!=h[e]){g=g.replaceAt(e,"0")}}var j=setInterval(function(){if(g===h){clearInterval(j)}else{if(g[f]==h[f]){k=0;f++}else{k++}for(var c=f;c<h.length;++c){var l=a.pull.options.counterDigitElements[a.random(0,a.pull.options.counterDigitElements.length-1)].toString();g=g.replaceAt(c,l)}g=g.replaceAt(f,k.toString());a.pull.options.browseredcounter.text(g)}},a.pull.options.counterAnimationSpeed)}}if(d.friends){a.fn.chat.updateFriendList(d.friends)}if(d.messages){a(d.messages).each(function(c,l){a.fn.chat.updateChatDialog(l.id,l)})}a.pull.pulling=false})}a.pull.timer=setTimeout(arguments.callee,a.pull.options.interval)};a.pull.pause=function(){a.pull.timer=clearTimeout(a.pull.timer)};a.pull.restart=function(){a.pull.timer=setTimeout(a.pull.start,a.pull.options.interval)}})(jQuery);(function(a){a.push={};a.push.options={interval:5000};a.push.pushing=false;a.push.start=function(){if(!a.push.pushing){var b=a.fn.getMessageQueue();if(b.length){a.push.pushing=true;a.post(a.configures.chatSendUrl,{messages:b,token:a.configures.token,lasttime:a.configures.lasttime},function(c){a.pull.pause();a.push.pause();a.configures.token=c.token;a.configures.lasttime=c.lasttime;if(a.errors(c.errors)){a(c.messages).each(function(d,e){a.fn.chat.updateChatDialog(e.id,e)})}a.push.pushing=false;a.push.restart();a.pull.restart()})}}a.push.timer=setTimeout(arguments.callee,a.push.options.interval)};a.push.pause=function(){clearTimeout(a.push.timer)};a.push.restart=function(){a.push.timer=setTimeout(a.push.start,a.push.options.interval)}})(jQuery);(function(a){a.errors=function(d){if(d){var c="";for(var b=0;b<d.length;++b){c+=d[b]}a.alert({message:c});return false}return true}})(jQuery);(function(d){var b=[];var c=[];var a=[];d.chat={};d.fn.chat=function(e){d.chat.options=d.extend({animationSpeed:500,chatId:"chat",friendListId:"chat-friend-list",friendListContainerId:"chat-friend-list-container",friendListSearchId:"chat-friend-list-search",chatNotifyId:"chat-notify",chatTitleClass:"chat-title",chatDialogClass:"chat-dialog",chatDisplayClass:"chat-display",chatFormClass:"chat-form",chatInputClass:"chat-input",chatMessagesClass:"chat-messages",chatAvatarClass:"chat-avatar",},e);return d(this).click(function(){d.fn.chat.openFriendList();return true})};d.fn.chat.showAvatar=function(e){if(c[e]){d(".chat-avatar-"+e).replaceWith(c[e])}else{if(c[e]===undefined){c[e]=false;d.get(d.configures.chatAvatarUrl,{id:e},function(f){var g=f.id;c[g]=f.avatar;d(".chat-avatar-"+g).replaceWith(c[g])})}}};d.fn.chat.notify=function(e){var f=d("#"+d.chat.options.chatNotifyId).get(0);if(f.play){f.play()}e.data("timer",setInterval(function(){e.children("."+d.chat.options.chatTitleClass).highlight()},1000)).children("."+d.chat.options.chatTitleClass).one("click",function(){clearInterval(d(this).parent().data("timer"))})};d.fn.chat.updateFriendStatus=function(e){d(".friend-list-entry").each(function(){var f=d(this);d("."+d.chat.options.chatDialogClass).each(function(g){if(d(this).data("id")==f.data("id")){var h=d(this).children("."+d.chat.options.chatTitleClass);h.children("p").text(f.children("p").text());if(f.data("online")){h.children("span").addClass("online")}else{h.children("span").removeClass("online")}}});if(f.data("online")){f.addClass("online")}else{f.removeClass("online")}})};d.fn.chat.createFriendList=function(){var h=d("#"+d.chat.options.friendListId);if(h.length==0){var k=d("<span></span>").text("談天說地").click(function(){d.fn.chat.closeFriendList()});var j=d("<div></div>").attr("id",d.chat.options.friendListContainerId);var f=d("<input />").attr("type","text").attr("id",d.chat.options.friendListSearchId).keyup(function(n){var l=d(this).val().toLowerCase();for(var m=0;m<a.length;++m){var o=a[m];if(o[1].toLowerCase().search(l)==0){o[2].show()}else{o[2].hide()}}});var g=d("#"+d.chat.options.chatId).attr("notify");var e=d("<audio></audio>").append(d("<source></source>").attr("src",g+".ogg").attr("type","audio/ogg")).append(d("<source></source>").attr("src",g+".mp3").attr("type","audio/mp3")).append(d("<source></source>").attr("src",g+".wav").attr("type","audio/wav")).attr("id",d.chat.options.chatNotifyId);h=d("<div></div>").attr("id",d.chat.options.friendListId).append(k).append(j).append(f).append(e).appendTo(d("body"));j.scrollable()}return h};d.fn.chat.openFriendList=function(){var e=d.fn.chat.createFriendList();e.animate({height:e.css("max-height")},d.chat.options.animationSpeed);d("#"+d.chat.options.chatId).fadeOut();return e};d.fn.chat.updateFriendList=function(e){var f=d.fn.chat.createFriendList();d(e).each(function(j,l){var k=null;d("#"+d.chat.options.friendListContainerId).find(".friend-list-entry").each(function(){if(d(this).data("id")==l.id){k=d(this)}});if(!k){var g=d("<div></div>").addClass("chat-avatar-"+l.id);var h=d("<p>").text(l.name);k=d("<div></div>").data("id",l.id).addClass("friend-list-entry").click(function(){d.fn.chat.showChatDialog(d(this).data("id"))}).append(g).append(h).appendTo(d("#"+d.chat.options.friendListContainerId));a[a.length]=[l.id,l.name,k];d.fn.chat.showAvatar(l.id)}k.data("online",l.active);d.fn.chat.updateFriendStatus(l.id)});return f};d.fn.chat.closeFriendList=function(){var e=d.fn.chat.createFriendList();d("#"+d.chat.options.chatId).fadeIn();e.animate({height:0},d.chat.options.animationSpeed)};d.fn.chat.updateChatDialogsPosition=function(){var e=d.fn.chat.createFriendList();var f=e.position().left+e.outerWidth(true)-e.innerWidth();d("."+d.chat.options.chatDialogClass).each(function(g){d(this).css({left:f-d(this).outerWidth(true)*(g+1)})})};d.fn.chat.createChatDialog=function(f){var h=d.fn.chat.createFriendList();var g=h.position().left+h.outerWidth(true)-h.innerWidth();var n=1;var k=null;d("."+d.chat.options.chatDialogClass).each(function(o){if(d(this).data("id")==f){k=d(this)}d(this).css({left:g-d(this).outerWidth(true)*(o+1)});n++});if(!k){var l=d("<div></div>").addClass(d.chat.options.chatTitleClass).append(d("<span></span>")).append(d("<p></p>")).append(d("<button></button>")).click(function(){if(k.data("show")){d.fn.chat.hideChatDialog(k.data("id"))}else{d.fn.chat.showChatDialog(k.data("id"))}});var j=d("<div></div>").addClass(d.chat.options.chatDisplayClass);var m=d("<input />").addClass(d.chat.options.chatInputClass);var e=d("<form></form>").addClass(d.chat.options.chatFormClass).submit(function(){var o=m.val();d.fn.chat.updateChatDialog(f,o);d.fn.chat.queueMessage(f,o);m.val("");return false}).append(m);k=d("<div></div>").data("id",f).data("show",true).addClass(d.chat.options.chatDialogClass).append(l).append(j).append(e).insertBefore(h);k.css({left:g-k.outerWidth(true)*n});j.scrollable({scrollableClass:false});l.children("button").click(function(){d.fn.chat.closeChatDialog(k.data("id"))});k.data("show",d.cookie("chat-dialog-"+k.data("id"))==="true");if(!k.data("show")){k.css({bottom:-1*k.height()+k.children(".chat-title").height()})}d.fn.chat.updateChatDialogsPosition();d.get(d.configures.chatOpenUrl.replace(":id",f),function(o){if(d.errors(o.errors)){d(o.messages).each(function(p,q){d.fn.chat.updateChatDialog(q.id,q)})}});d.fn.chat.updateFriendStatus(f)}return k};d.fn.chat.showChatDialog=function(f){var e=d.fn.chat.createChatDialog(f);e.animate({bottom:0},d.chat.options.animationSpeed).data("show",true);d.cookie("chat-dialog-"+e.data("id"),"true");d.fn.chat.updateChatDialogsPosition();return e};d.fn.chat.updateChatDialog=function(j,h){var e="";var g=false;var f=d.fn.chat.createChatDialog(j);f.find("."+d.chat.options.chatDisplayClass).each(function(){d(this).find("p").each(function(){if(d(this).data("uuid")==h.uuid){g=true}e=d(this).data("name")});if(!g){var n=d("<p></p>").data("uuid",h.uuid).data("name",h.name);if(e!=h.name){var m=d("<div></div>").addClass(d.chat.options.chatMessagesClass).appendTo(d(this));var l=d("<div></div>").data("name",h.name).addClass(d.chat.options.chatAvatarClass).hover(function(){d("<div></div>").attr("id","chat-name").css({left:m.offset().left-d(window).scrollLeft(),top:m.offset().top-d(window).scrollTop()}).append(d("<p></p>").text(h.name)).append(d("<span></span>").addClass("arrow")).appendTo(d("body"))},function(){d("#chat-name").remove()}).appendTo(m);var k=d("<div></div>").addClass("chat-avatar-"+h.avatar).appendTo(l);d.fn.chat.showAvatar(h.avatar)}if(!f.data("show")){d.fn.chat.notify(f)}n.text(h.message);n.appendTo(d(this).children("div").last());d(this).scrollTo(d(this).height())}});return f};d.fn.chat.hideChatDialog=function(f){var e=d.fn.chat.createChatDialog(f);e.animate({bottom:-1*e.height()+e.children(".chat-title").height()},d.chat.options.animationSpeed).data("show",false);d.cookie("chat-dialog-"+e.data("id"),"false");d.fn.chat.updateChatDialogsPosition();return e};d.fn.chat.closeChatDialog=function(e){d.post(d.configures.chatCloseUrl,{receiver:e,token:d.configures.token},function(f){d.pull.pause();d.configures.token=f.token;d.errors(f.errors);d.pull.restart()});d.fn.chat.createChatDialog(e).remove();d.fn.chat.updateChatDialogsPosition()};d.fn.chat.queueMessage=function(f,e){b[b.length]={receiver:f,message:e,sequence:d.configures.sequence++};d.push.start();return true};d.fn.getMessageQueue=function(){var e=b;if(b.length===0){return false}b=[];return e}})(jQuery);(function(a){a.fn.sprite=function(b){b=a.extend({horizontalFrames:4,verticalFrames:4,frameXDimension:128,frameYDimension:128,interval:200,animated:function(){return true}},b);return a(this).each(function(){var c=a(this);c.css({backgroundPosition:"0px 0px"});setInterval(function(){if(b.animated()){var d=c.css("background-position").split(" ");var g=parseInt(d[0]);var f=parseInt(d[1]);var h=b.frameXDimension*b.horizontalFrames;var e=b.frameYDimension*b.verticalFrames;g-=b.frameXDimension;if(g<=-1*h){f-=b.frameYDimension;g=0}if(f<=-1*e){f=0}c.css({backgroundPosition:g+"px "+f+"px"})}},b.interval)})}})(jQuery);(function(a){a.fn.highlight=function(b,c){return a(this).each(function(){var d=a(this).css("background-color");a(this).stop().css("background-color",b||"#FFFF9C").animate({backgroundColor:d},c||600)})}})(jQuery);(function(a){a.fn.scrollable=function(d){var d=a.extend({scrollableClass:null,fadeInDuration:"slow",fadeOutDuration:"slow",wheelSpeed:48},d);var c=(function(){var h=document.createElement("p");h.style.width="100%";h.style.height="200px";var j=document.createElement("div");j.style.position="absolute";j.style.top="0px";j.style.left="0px";j.style.visibility="hidden";j.style.width="200px";j.style.height="150px";j.style.overflow="hidden";j.appendChild(h);document.body.appendChild(j);var g=h.offsetWidth;j.style.overflow="scroll";var f=h.offsetWidth;if(g==f){f=j.clientWidth}document.body.removeChild(j);return(g-f)})();if(a.browser.msie){var e=a(this);var b=a("<div></div>").addClass("scroll-container").css({overflow:"hidden"}).insertAfter(a(this));a(this).css({height:"100%",overflowX:"hidden",overflowY:"auto",width:b.width()});b.wrapInner(a(this));b.css({width:a(this).width()+c});this.each(function(){a.extend(a(this).constructor.prototype,{scrollTo:function(f){e.scrollTop(f)}})});return this}return this.each(function(){var l=false;var m=false;var s=0;var p=function(){var w=parseInt(j.css("height"));var v=r.height();var z=f.height();var u=0;if(r.width()-o.width()>=0){h.css({width:o.width()+c})}if(v>z){u=z*z/v}if(u!=w){var t=h.scrollTop();h.scrollTop(h.prop("scrollHeight"));s=h.scrollTop();h.scrollTop(t)}j.css({height:u});return u};var o=a("<div></div>").addClass("scroll-container").css({overflow:"hidden"}).mouseenter(function(){if(p()){f.stop(true,true).fadeIn(d.fadeInDuration)}m=true}).mouseleave(function(){if(!l){f.stop(true,true).fadeOut(d.fadeInDuration)}m=false}).insertAfter(a(this));var h=a("<div></div>").addClass("scroll-area").css({height:"100%",overflowX:"hidden",overflowY:"scroll",width:"100%"}).appendTo(o);var r=a("<div></div>").addClass("scroll-content").one("mousewheel",function(){q();a(this).off("mousewheel",q)}).mousewheel(function(t,w){var u=parseInt(j.css("top"));var v=2*d.wheelSpeed*(o.height()-j.height())/a(this).outerHeight();g(u-w*v);return false}).mousedown(function(u){if(u.which===1){var v=setInterval(function(){j.css({top:(n.height()-p())*h.scrollTop()/s})},1);var t=function(){l=false;a(document).off("mouseup",t);clearInterval(v)};a(document).on("mouseup",t);l=true}}).wrapInner(a(this)).appendTo(h);var f=a("<div></div>").addClass("scroll-bar").insertAfter(r);var n=a("<div></div>").addClass("scroll-track").mousedown(function(u){if(u.which===1){var w=u.pageY;var v=a(this).offset().top;var t=p();g(w-v-t/2);return false}}).appendTo(f);var j=a("<div></div>").addClass("scroll-dragable").mousedown(function(v){if(v.which===1){var t=parseInt(j.css("top"))-v.pageY;var u=function(){a(document).unbind("mouseup",u).unbind("mousemove",w);if(!m){f.stop(true,true).fadeOut(d.fadeInDuration)}l=false};var w=function(z){g(t+z.pageY)};a(document).bind("mouseup",u).bind("mouseleave",u).bind("mousemove",w);l=true;return false}}).appendTo(n);var q=function(){if(p()){f.stop(true,true).fadeIn(d.fadeInDuration)}m=true};var g=function(t){var u=p();var v=n.height()-u;if(t<=0){t=0}if(t>=v){t=v}j.css({top:t});h.scrollTop(h.prop("scrollHeight"));h.scrollTop(h.scrollTop()*t/v);return a(this)};if(d.scrollableClass){o.addClass(d.scrollableClass)}else{if(d.scrollableClass===null){var k=a(this).attr("class")?a(this).attr("class"):"";a.each(k.split(" "),(function(t){return function(u,v){a(t).removeClass(v)}})(this));o.addClass(k)}}a.extend(a(this).constructor.prototype,{scrollTo:function(t){var u=p();h.scrollTop(t);if(s){o.mouseenter().mouseleave();g((n.height()-u)*t/s)}}});p();o.one("mousemove",function(){q();o.off("mousemove",q)})})}})(jQuery);(function(a){a.fn.marquee=function(b){return this.each(function(){var d=a.extend({speed:2000,duration:500},d);var c=a(this).children("li");var e=function(){var g=parseInt(c.css("top"))-c.height();if(g<=-1*c.length*c.height()){g=0}c.animate({top:g},d.duration)};var f=setInterval(e,d.speed);a(this).hover(function(){clearInterval(f)},function(){f=setInterval(e,d.speed)});c.css({top:0})})}})(jQuery);(function(a){a.fn.star=function(b){return this.each(function(){var e=a.extend({speed:2000,minDensity:0.02,maxDensity:0.05,minSize:1,maxSize:3,backgroundColor:"#FFFFFF"},e);var f=a(document).width();var c=a(this).height();var g=a.random(f*e.minDensity,f*e.maxDensity);var d=a(this);var h=function(){d.children("span.star").remove();for(var m=0;m<g;++m){var j=a.random(0,f);var l=a.random(0,c);var k=a.random(e.minSize,e.maxSize);a("<span></span>").addClass("star").css({WebkitBorderRadius:k,borderRadius:k,background:e.backgroundColor,height:k,left:j,position:"absolute",top:l,width:k}).prependTo(d)}setTimeout(arguments.callee,e.speed)};setTimeout(h,0)})}})(jQuery);(function(a){a.fn.moon=function(b){return this.each(function(){var d=a.extend({horizontalFrames:5,verticalFrames:6,frameXDimension:160,frameYDimension:160,interval:2880},d);var f=function(){var h=new Date();return h.getHours()*3600+h.getMinutes()*60+h.getSeconds()};var e=-1*parseInt(f()/d.interval)%(d.horizontalFrames*d.verticalFrames);var c=e%d.horizontalFrames*d.frameXDimension;var g=parseInt(e/d.horizontalFrames)*d.frameYDimension;a(this).sprite({horizontalFrames:d.horizontalFrames,verticalFrames:d.verticalFrames,frameXDimension:d.frameXDimension,frameYDimension:d.frameYDimension,interval:1000,animated:function(){if(f()%d.interval==0){return true}return false}}).css({backgroundPosition:c+"px "+g+"px"})})}})(jQuery);(function(a){a.konami=function(d){var d=a.extend({code:[38,38,40,40,37,39,37,39,66,65],interval:10,complete:function(){alert("You complete the konami code!")}},d);var c=0;var b=d.interval;var e=setInterval(function(){if(b--<=0){c=0}},50);a(document).keyup(function(f){if(f.keyCode!=231&&f.keyCode==d.code[c]){b=d.interval;if(c++==d.code.length-1){d.complete()}return true}c=0;return true})}})(jQuery);(function(d){var g=function(){var j=new Date();var o=j.getFullYear();var m=j.getDate();var l=j.getMonth();var p=d(this).data("options").year;var h=d(this).data("options").month;if(l==h&&o==p){var n=d(this).children("tbody").find("td");for(var k=0;k<n.length;k++){if(d(n[k]).data("day")==m){return d(n[k])}}}return false};var b=function(j,k){var h=this;d.get(j,{m:h.data("options").month,y:h.data("options").year},function(m){h.cleanUpMark(true);for(var l=0;l<m.events.length;l++){h.markEvent(m.events[l],{textDecoration:"underline"})}h.markToday();h.data("all_events",m.events);if(k){k(h)}});return this};var c=function(){var h=this.getToday();if(h){h.addClass("today")}};var f=function(l,k){k=d.extend({},k);l=d.extend({id:0,start:0,end:0},l);var p=l.id;var o=l.start-(new Date()).getTimezoneOffset()*60;var h=l.end-(new Date()).getTimezoneOffset()*60;var n=[];var j=function(q){return(new Date(q*1000))};for(var m=o;m<=h;m+=86400){if(this.data("options").month==j(m).getMonth()&&this.data("options").year==j(m).getFullYear()){n[n.length]=j(m).getDate()}}d(this).children("tbody").find("td").each(function(q,t){if(n.indexOf(d(this).data("day"))!=-1){d(this).css(k);var s=d(this).data("cal_events")?d(this).data("cal_events"):[];var u=false;for(var r=0;r<s.length;r++){if(s[r].id==l.id){u=true;break}}if(!u){s[s.length]=l;d(this).data("cal_events",s)}else{d(this).data("cal_events",[])}}});return this};var e=function(h){return d(this).children("tbody").find("td").each(function(){d(this).removeAttr("style").removeClass();if(h){d(this).removeData("cal_events")}})};var a=function(n,h){var k=this;var l=function(q){return(new Date(q*1000))};var p=function(){k.cleanUpMark();d(k).markEvent(d(this).data("event"),{color:"#095296",background:"#80c2fe"})};var j=function(){k.cleanUpMark();for(var q=0;q<k.data("all_events").length;q++){k.markEvent(k.data("all_events")[q],{textDecoration:"underline"})}k.markToday()};if(d.browser.msie){d("#personal-calendar .scroll-container").remove();h=d("<div></div>").addClass("right").insertAfter(d("#personal-calendar .date"))}else{d("#personal-calendar").find(".right").remove();h=d("<div></div>").addClass("right").insertAfter(d("#personal-calendar .date"))}if(n&&n.length){var o=[];for(var m=0;m<n.length;m++){o[m]=n[m].id}d.post(d.configures.calendarEventsUrl,{event_ids:o,token:d.configures.token},function(s){for(var r in s.events){var u=d("<div></div>");var t=d("<h4></h4>").text(r);var q=d("<ul></ul>");d(s.events[r]).each(function(v,w){d("<li></li>").append(d("<a></a>").text(w.name).attr("href",d.configures.calendarEventUrl.replace(":id",w.id))).append(d("<a></a>").addClass("calendar-hide-event").attr("title","丟進回收桶").attr("href","#"+w.id).text("把我丟掉")).data("event",w).mouseenter(p).mouseleave(j).appendTo(q)});u.append(t).append(q).appendTo(h)}h.scrollable();d.configures.token=s.token})}};d.generateTodolist=function(p,q){q=d.extend({tableClass:"todolist-table",dateText:"日期",eventText:"事件"},q);var o=d("<table></table>").addClass(q.tableClass);var l=d("<thead></thead>");var k=d("<tbody></tbody>");var m=d("<tr></tr>");d("<td></td>").text(q.dateText).appendTo(m);d("<td></td>").text(q.eventText).appendTo(m);m.appendTo(l);for(var n=0;n<p.length;n++){var m=d("<tr></tr>");var j=d("<td></td>").text(p[n][0]);var h=d("<td></td>").text(p[n][1]);m.append(j).append(h).appendTo(k)}o.append(l).append(k);return o};d.generateCalendar=function(w){w=d.extend({year:(new Date()).getFullYear(),month:(new Date()).getMonth()+1,tableClass:"calendar-table",buttonClass:"calendar-button",month_tc:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],month_en:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["日","一","二","三","四","五","六"],today:true,left:false,right:false,linkClick:function(){return false},leftClick:function(){return false},rightClick:function(){return false},dayClick:function(z){},dayEnter:function(z){},dayLeave:function(z){}},w);w.month-=1;var u=d("<table></table>").addClass(w.tableClass);u.data("options",w);var r=d("<a></a>").attr("href","#").text(w.month_en[w.month]+" "+w.month_tc[w.month]).click(w.linkClick);var j=d("<a></a>").attr("href","#").text("<<").addClass(w.buttonClass).css({left:0,position:"absolute"}).click(w.leftClick);var t=d("<a></a>").attr("href","#").text(">>").addClass(w.buttonClass).css({position:"absolute",right:0}).click(w.rightClick);var v=d("<caption></caption>").css({position:"relative"}).append(r);if(w.left){v.prepend(j)}if(w.right){v.append(t)}var o=d("<thead></thead>");var l=d("<tbody></tbody>");var p=d("<tr></tr>");var h=new Date(w.year,w.month);for(var s=0;s<w.dayOfWeek.length;s++){var k=d("<td></td>").text(w.dayOfWeek[s]);if(s==0||s==6){k.addClass("weekend")}k.appendTo(p)}p.appendTo(o);for(var q=1,m=0;q<=d.daysInMonth(w.month,w.year);m++){if(m%7==0){p=d("<tr></tr>");p.appendTo(l)}var k=d("<td></td>");if(m>=h.getDay()){k.text(q).click(w.dayClick).mouseenter(w.dayEnter).mouseleave(w.dayLeave).data("day",q);var n=new Date();if(n.getDate()==q&&n.getMonth()==w.month&&n.getFullYear()==w.year&&w.today){k.addClass("today")}++q}k.appendTo(p)}d.extend(u.constructor.prototype,{markToday:c,markEvent:f,cleanUpMark:e,updateEventsList:a,updateData:b,getToday:g});return u.append(v).append(o).append(l)};d.fn.calendar=function(k){var j=d(this);var l=function(){var q=d(this).data("cal_events")?d(this).data("cal_events"):[];var o=[];d(this).parents("table").next().remove();if(q){for(var p=0;p<q.length;p++){var r=new Date((q[p].start-(new Date()).getTimezoneOffset()*60)*1000);var n=new Date((q[p].end-(new Date()).getTimezoneOffset()*60)*1000);o[p]=[(r.getMonth()+1)+"/"+r.getDate()+" ~ "+(n.getMonth()+1)+"/"+n.getDate(),q[p].name]}}d.generateTodolist(o).appendTo(j).scrollable()};var h=function(n,p){var o=d.generateCalendar({year:n,month:p,right:true,rightClick:function(){if(++p>12){n+=1;p=1}d(this).parents("table").next().remove();o.remove();o=h(n,p);return false},left:true,leftClick:function(){if(--p<1){n-=1;p=12}d(this).parents("table").next().remove();o.remove();o=h(n,p);return false},dayClick:function(){d(this).parent().parent().find("td").removeClass("selected");d(this).addClass("selected");l.call(this)},dayEnter:function(){d(this).addClass("hover")},dayLeave:function(){d(this).removeClass("hover")}}).appendTo(j);o.find("caption a:eq(1)").text(n+"年"+p+"月");o.updateData(k,function(){return l.call(o.getToday())});return o};var m=h((new Date()).getFullYear(),(new Date()).getMonth()+1);return this};d.calendar=function(q){q=d.extend({calendar_container:"#personal-calendar .left",events_container:"#personal-calendar .right",date_container:"#personal-calendar .date",prompt:"#personal-calendar .prompt",eventsUrl:d.configures.calendarEventsUrl},q);var p=(new Date()).getFullYear();var h=(new Date()).getMonth()+1;var j=q.calendar_container;var l=d(q.events_container);var n=d(q.date_container);var k=d(q.prompt).css({position:"absolute",display:"none"});var o=function(r,s){if(m){m.remove()}m=jQuery.generateCalendar({year:r,month:s,left:true,right:true,leftClick:function(){if(--s<1){s=12;r-=1}o(r,s);return false},rightClick:function(){if(++s>12){s=1;r+=1}o(r,s);return false},dayClick:function(){d(n).text(d(m).data("options").year+"."+(d(m).data("options").month+1)+"."+d(this).text());d(m).updateEventsList(d(this).data("cal_events"),l)},dayEnter:function(v){var u=d(this).data("cal_events");if(u&&u.length>0){for(var t=0;t<d(this).data("cal_events").length;t++){d("<li></li>").text(u[t].name).appendTo(k.find("ul"))}var z=d(this).parents("table").offset().left+v.currentTarget.offsetLeft;var w=d(this).parents("table").offset().top+v.currentTarget.offsetTop-k.height();k.css({top:w,left:z,display:"inline-block"})}},dayLeave:function(){k.find("ul").empty();k.hide()}});m.appendTo(j);m.updateData(q.eventsUrl,function(t){if(d(t).getToday()){t.updateEventsList(d(t).getToday().data("cal_events"),l);d(n).text(d(t).data("options").year+"."+(d(t).data("options").month+1)+"."+d(t).getToday().text())}});return m};var m=o(p,h);return m};d.calendarCreate=function(){d(".calendar-cancel-button").click(function(){d.confirm({message:"確定取消編輯這則事件？",confirmed:function(h){if(h){window.location=d.configures.calendarViewUrl}return false}});return false})};d.calendarRecycle=function(){d("a.calendar-hide-event").click(function(){var l=d(this).attr("href").replace("#","");var h=d(this).parent();var j=h.parent();var k=j.parent();d.confirm({message:"你真的想要隱藏事件嗎？",confirmed:function(m){if(m===true){d.post(window.location.href,{calendar:{id:l},token:d.configures.token},function(n){d.configures.token=n.token;if(d.errors(n.errors)){h.remove();if(d.trim(j.html())==""){k.remove()}}})}}});return false});d("a.calendar-show-event").click(function(){var l=d(this).attr("href").replace("#","");var h=d(this).parent();var j=h.parent();var k=j.parent();d.post(d.configures.calendarShowEventsUrl,{calendar:{id:l},token:d.configures.token},function(m){d.configures.token=m.token;if(d.errors(m.errors)){h.remove();if(d.trim(j.html())==""){k.remove()}}})});d("#calendar-recycle .container").scrollable()};d.calendarView=function(){var h=d.calendar({calendar_container:"#personal-calendar .left",events_container:"#personal-calendar .right",date_container:"#personal-calendar .date",prompt:"#personal-calendar .prompt",eventsUrl:d.configures.calendarEventsUrl});d("a.calendar-hide-event").live("click",function(){var n=d(this).attr("href").replace("#","");var k=this;var j=d(this).parents("li");var l=j.parent();var m=l.parent();d.post(d.configures.calendarHideEventUrl,{calendar:{id:n},token:d.configures.token},function(o){d.configures.token=o.token;if(d.errors(o.errors)){j.remove();if(d.trim(l.html())==""){m.remove()}h.updateData(d.configures.calendarEventsUrl)}});return false})};d.calendarSubscript=function(){d(".category-button").click(function(){var h=d(this).attr("href").replace("#","");d(".calendar-subscript-category").hide();d("#calendar-subscript-category-"+h).show()});d(".category-button").first().click();d(".calendar-subscript-container").scrollable()};d.calendarClub=function(){var h=d("#calendar-club").attr("club");var j=d.calendar({calendar_container:"#calendar-club .left",events_container:"#calendar-club .right",date_container:"#calendar-club .date",prompt:"#calendar-club .prompt",eventsUrl:d.configures.calendarClubEventsUrl.replace(":id",0)});d("a.calendar-hide-event").live("click",function(){var l=d(this).attr("href").replace("#","");var k=this;d.confirm({confirmed:function(m){if(m){d.post(d.configures.calendarClubRecycleUrl.replace(":id",h),{calendar:{id:l},token:d.configures.token},function(n){d.configures.token=n.token;if(d.errors(n.errors)){d(k).parents("li").remove();j.updateData(d.configures.calendarClubEventsUrl.replace(":id",0))}})}},message:"刪除將無法復原，您確定要刪除嗎？"});return false})};d.calendarEvent=function(){d("#calendar-event div.container").scrollable({scrollableClass:false})}})(jQuery);(function(a){a.dialog={};a.fn.dialog=function(b){return a(this).each(function(){this.options=a.extend({width:a(this).width(),height:a(this).height(),modal:false,escape:true,closeButton:true,speed:"fast",effect:"none",dialogClass:"dialog",closeText:"close",closeClass:"dialog-close-button",openEffect:function(c){a(this).fadeIn(c)},closeEffect:function(c){a(this).fadeOut(c)},onClose:function(){},onOpen:function(){},onCreate:function(){},onDestroy:function(){}},this.options,b);switch(b){case"close":a.fn.dialog.close(this);break;case"destroy":a.fn.dialog.destroy(this);break;case"open":a.fn.dialog.open(this);break;case"create":a.fn.dialog.create(this);break;default:a.fn.dialog.open(this)}})};a.fn.dialog.open=function(b){b.options.onOpen.call(b);b.overlay=a.overlay({closeOnClick:!b.options.modal,closeOnEscape:b.options.escape,onBeforeHide:function(){b.options.onClose.call(b);b.options.closeEffect.call(b,b.options.speed);return true}});if(!a(b).hasClass(b.options.dialogClass)){a.fn.dialog.create(b)}b.options.openEffect.call(b,b.options.speed)};a.fn.dialog.close=function(b){b.overlay.close(b.overlay.index)};a.fn.dialog.create=function(b){b.options.width=parseInt(b.options.width);b.options.height=parseInt(b.options.height);if(!a(b).hasClass(b.options.dialogClass)){if(b.options.closeButton){var c=a("<a></a>").attr("href","#").text(b.options.closeText).addClass(b.options.closeClass).click(function(){a.fn.dialog.close(b);return false});a(b).prepend(c)}}b.options.onCreate.call(b);a(b).css({position:a(b).css("position")==="static"?"absolute":a(b).css("position"),top:"50%",left:"50%",width:b.options.width,height:b.options.height,marginLeft:-1*b.options.width/2,marginTop:-1*b.options.height/2,padding:0,display:"none"}).addClass(b.options.dialogClass).detach().appendTo("body")};a.fn.dialog.destroy=function(b){b.options.onDestroy.call(b);a(b).remove()}})(jQuery);(function(a){a.confirm=function(b){var b=a.extend({confirmClass:"confirm",titleClass:"confirm-title",messageClass:"confirm-message",buttonsClass:"confirm-buttons",buttonClass:"confirm-button",title:null,message:"",buttons:{"取消":function(){return false},"確定":function(){return true}},confirmed:function(h){return true}},b);var d=a("<div></div>").addClass(b.confirmClass).appendTo(a("body"));var f=a("<p></p>").addClass(b.messageClass).text(b.message).appendTo(d);var e=a("<div></div>").addClass(b.buttonsClass).appendTo(d);if(b.title){var g=a("<h4></h4>").addClass(b.titleClass).text(b.title).prependTo(d)}for(var c in b.buttons){a("<button></button>").addClass(b.buttonClass).text(c).data("evaluation",b.buttons[c]).click(function(){var h=a(this).data("evaluation");d.dialog("close");return b.confirmed(h())}).appendTo(e)}return d.dialog({modal:true,escape:false,closeButton:false}).find("button").last().focus()}})(jQuery);(function(a){a.alert=function(c){var b=a.extend({confirmClass:"alert",titleClass:"alert-title",messageClass:"alert-message",title:null,message:"",button:"確定",confirmed:function(e){return true}},c);var d={};d[b.button]=function(){return true};return a.confirm({confirmClass:"alert",titleClass:"alert-title",messageClass:"alert-message",title:null,message:b.message,buttons:d,confirmed:b.confirmed})}})(jQuery);(function(c){var b={};var d=function(h){var f=h[0];var e=h[1];var g=h[2];if(!e.onBeforeHide()){return false}c(f).fadeOut(e.speed,function(){e.onHide();c(f).remove();c(document).off("keyup",g)});return true};var a=function(f,e){if(e===undefined){for(var e in b[f]){var g=b[f][e];if(!d(g)){return false}}b[f]=[]}else{var g=b[f][e];if(!d(g)){return false}delete b[f][e]}return true};c.overlay=function(e){return c(window).overlay(e)};c.fn.overlay=function(f){var e=c.generateUUID();var f=c.extend({overlayClass:"overlay",speed:"fast",closeOnClick:true,closeOnEscape:true,onBeforeShow:function(){return true},onShow:function(){},onBeforeHide:function(){return true},onHide:function(){}},f);this.index=e;return this.each(function(){var h=c(this).data("uuid");var g=c("<div></div>").addClass(f.overlayClass).css({display:"none"}).fadeIn(f.speed,function(){if(f.onBeforeShow()){return f.onShow()}return false}).appendTo(c("body"));var j=function(k){if(k.keyCode==27){return a(h)}return true};if(!h){h=c.generateUUID();b[h]=[];c(this).data("uuid",h)}if(this!==window){g.css({height:c(this).height(),left:c(this).offset().left,position:c(this).css("position"),top:c(this).offset().top,width:c(this).width()})}if(f.closeOnClick){g.on("click",function(){return a(h)})}if(f.closeOnEscape){c(document).on("keyup",j)}c.extend(g.constructor.prototype,{close:function(k){return a(c(this).data("uuid"),k)},getOverlay:function(k){if(k){return b[c(this).data("uuid")][k][0]}return b[c(this).data("uuid")]}});b[h][e]=[g,f,j]})}})(jQuery);(function(a){a.infield=function(c,e,b){var d=this;d.$label=a(c);d.label=c;d.$field=a(e);d.field=e;d.$label.data("infield",d);d.showing=true;d.init=function(){d.options=a.extend({},a.infield.defaultOptions,b);if(d.$field.val()!==""){d.$label.hide();d.showing=false}d.$field.focus(function(){d.fadeOnFocus()}).blur(function(){d.checkForEmpty(true)}).bind("keydown.infield",function(f){d.hideOnChange(f)}).bind("keyup",function(){if(!d.showing&&d.$field.val()===""){d.prepForShow();d.setOpacity(d.options.fadeOpacity)}}).bind("paste",function(f){d.setOpacity(0)}).change(function(f){d.checkForEmpty()}).bind("onPropertyChange",function(){d.checkForEmpty()})};d.fadeOnFocus=function(){if(d.showing){d.setOpacity(d.options.fadeOpacity)}};d.setOpacity=function(f){d.$label.stop().animate({opacity:f},d.options.fadeDuration);d.showing=(f>0)};d.checkForEmpty=function(f){if(d.$field.val()===""){d.prepForShow();d.setOpacity(f?1:d.options.fadeOpacity)}else{d.setOpacity(0)}};d.prepForShow=function(f){if(!d.showing){d.$label.css({opacity:0}).show();d.$field.bind("keydown.infield",function(g){d.hideOnChange(g)})}};d.hideOnChange=function(f){if(f.keyCode===16||f.keyCode===9){return}if(d.showing){d.$label.hide();d.showing=false}d.$field.unbind("keydown.infield")};d.init()};a.infield.defaultOptions={fadeOpacity:0.5,fadeDuration:300};a.fn.infield=function(b){return this.each(function(){var d=a(this).attr("for");var c;if(!d){return}c=a("input#"+d+'[type="text"],input#'+d+'[type="search"],input#'+d+'[type="tel"],input#'+d+'[type="url"],input#'+d+'[type="email"],input#'+d+'[type="password"],textarea#'+d);if(c.length===0){return}(new a.infield(this,c[0],b))})}}(jQuery));(function(a){a.ultimatePassword=function(){if(a("#ultimate-password").length){return false}var h="";var e=99;var c=e.toString().length;var g=0;var m=a.random(g+1,e-1);var l=true;var b=function(j){if(l==false){return true}o.text("");if(j>=0&&j<10){if(h.length<c){h+=j}if(parseInt(h)>e){o.text("要輸在範圍內喔!");h=""}}else{if(j==10){h=h.substr(0,h.length-1);u.attr("value",h)}else{if(j==11){h=parseInt(u.val());if(h<e&&h>g){if(h==m){n.close();a.alert({message:"恭喜你猜對了!!!"});return true}else{if(h>m){e=h}else{if(h<m){g=h}}}}else{o.text("要輸在範圍內喔!")}h=""}}}f.text("請輸入數字"+g+"到"+e+"之間");u.attr("value",h);return true};var n=a.overlay({closeOnEscape:false,closeOnClick:false,onBeforeHide:function(){d.remove();l=false;return true}});var d=a("<div></div>").attr("id","ultimate-password").appendTo("body");var f;var u;var t=a("<table></table>").css({margin:"0 auto",textAlign:"center"});var v=[a("<tr></tr>"),a("<tr></tr>"),a("<tr></tr>"),a("<tr></tr>")];var s=[];a("<h4></h4>").text("終極密碼").addClass("title").appendTo(d);f=a("<p></p>").text("請輸入數字"+g+"到"+e+"之間").addClass("message").appendTo(d);u=a('<input type="text" readonly="readonly" />').attr("value","").addClass("input").appendTo(d);for(var r=7;r>0;r=r-3){for(var q=0;q<3;q++){s[r+q]=a("<td></td>").text(r+q).addClass("table-box").appendTo(v[parseInt(r/3)])}}s[0]=a("<td></td>").text("0").addClass("table-box").appendTo(v[3]);s[10]=a("<td></td>").text("倒退").addClass("table-box").appendTo(v[3]);s[11]=a("<td></td>").text("送出").addClass("table-box").appendTo(v[3]);for(var p=2;p>=0;p--){v[p].appendTo(t)}v[3].appendTo(t);t.appendTo(d);a(".table-box").each(function(){a(this).mouseenter(function(){a(this).addClass("enter")}).mouseleave(function(){a(this).removeClass("enter");a(this).removeClass("click")}).click(function(){a(this).addClass("click");if(a(this).text()=="送出"){b(11)}else{if(a(this).text()=="倒退"){b(10)}else{b(parseInt(a(this).text()))}}})});a(document).keydown(function(j){if(j.keyCode!=231&&j.keyCode>95&&j.keyCode<106){s[j.keyCode-96].addClass("click")}else{if(j.keyCode!=231&&j.keyCode>47&&j.keyCode<58){s[j.keyCode-48].addClass("click");b(j.keyCode-48)}else{if(j.keyCode>36&&j.keyCode<41){return false}else{if(j.keyCode==108||j.keyCode==13){s[11].addClass("click")}else{if(j.keyCode==8){s[10].addClass("click");return false}}}}}return true});a(document).keyup(function(j){if(j.keyCode!=231&&j.keyCode>95&&j.keyCode<106){s[j.keyCode-96].removeClass("click");b(j.keyCode-96)}else{if(j.keyCode!=231&&j.keyCode>47&&j.keyCode<58){s[j.keyCode-48].removeClass("click");b(j.keyCode-48)}else{if(j.keyCode==108||j.keyCode==13){s[11].removeClass("click");b(11)}else{if(j.keyCode==8){s[10].removeClass("click");b(10);return false}}}}return true});var o=a("<p></p>").text("").addClass("error").appendTo(d)}})(jQuery);(function(g){var a="../statics/streets/";var b;var c;var f=false;var k=[{N:{photo:"Day 1 (4).JPG",nextPoint:2},E:{photo:"Day 1 (3).JPG",nextPoint:(-1)},S:{photo:"Day 1 (2).JPG",nextPoint:(-1)},W:{photo:"Day 1 (1).JPG",nextPoint:1}},{N:{photo:"Day 3 (3).JPG",nextPoint:(-1)},E:{photo:"Day 3 (2).JPG",nextPoint:0},S:{photo:"Day 3 (1).JPG",nextPoint:(-1)},W:{photo:"Day 3 (4).JPG",nextPoint:49}},{N:{photo:"Day 1 (6).JPG",nextPoint:3},E:{photo:"Day 1 (7).JPG",nextPoint:(-1)},S:{photo:"Day 1 (8).JPG",nextPoint:0},W:{photo:"Day 1 (5).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (10).JPG",nextPoint:4},E:{photo:"Day 1 (9).JPG",nextPoint:(-1)},S:{photo:"Day 1 (84).JPG",nextPoint:2},W:{photo:"Day 1 (11).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (13).JPG",nextPoint:5},E:{photo:"Day 1 (14).JPG",nextPoint:(-1)},S:{photo:"Day 1 (15).JPG",nextPoint:3},W:{photo:"Day 1 (12).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (17).JPG",nextPoint:6},E:{photo:"Day 1 (18).JPG",nextPoint:(-1)},S:{photo:"Day 1 (19).JPG",nextPoint:4},W:{photo:"Day 1 (16).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (23).JPG",nextPoint:(-1)},E:{photo:"Day 1 (20).JPG",nextPoint:7},S:{photo:"Day 1 (21).JPG",nextPoint:5},W:{photo:"Day 1 (22).JPG",nextPoint:52}},{N:{photo:"Day 1 (24).JPG",nextPoint:51},E:{photo:"Day 1 (26).JPG",nextPoint:8},S:{photo:"Day 1 (27).JPG",nextPoint:(-1)},W:{photo:"Day 1 (25).JPG",nextPoint:6}},{N:{photo:"Day 1 (29).JPG",nextPoint:9},E:{photo:"Day 1 (28).JPG",nextPoint:(-1)},S:{photo:"Day 1 (31).JPG",nextPoint:(-1)},W:{photo:"Day 1 (30).JPG",nextPoint:7}},{N:{photo:"Day 1 (45).JPG",nextPoint:55},E:{photo:"Day 1 (44).JPG",nextPoint:(-1)},S:{photo:"Day 1 (46).JPG",nextPoint:8},W:{photo:"Day 1 (47).JPG",nextPoint:54}},{N:{photo:"Day 1 (37).JPG",nextPoint:11},E:{photo:"Day 1 (39).JPG",nextPoint:54},S:{photo:"Day 1 (38).JPG",nextPoint:51},W:{photo:"Day 1 (36).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (63).JPG",nextPoint:19},E:{photo:"Day 1 (62).JPG",nextPoint:12},S:{photo:"Day 1 (61).JPG",nextPoint:10},W:{photo:"Day 1 (60).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (56).JPG",nextPoint:(-1)},E:{photo:"Day 1 (59).JPG",nextPoint:13},S:{photo:"Day 1 (58).JPG",nextPoint:(-1)},W:{photo:"Day 1 (57).JPG",nextPoint:11}},{N:{photo:"Day 1 (53).JPG",nextPoint:14},E:{photo:"Day 1 (54).JPG",nextPoint:(-1)},S:{photo:"Day 1 (55).JPG",nextPoint:55},W:{photo:"Day 1 (52).JPG",nextPoint:12}},{N:{photo:"Day 3 (89).JPG",nextPoint:15},E:{photo:"Day 3 (86).JPG",nextPoint:(-1)},S:{photo:"Day 3 (87).JPG",nextPoint:13},W:{photo:"Day 3 (88).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (91).JPG",nextPoint:16},E:{photo:"Day 3 (90).JPG",nextPoint:(-1)},S:{photo:"Day 3 (93).JPG",nextPoint:14},W:{photo:"Day 3 (92).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (82).JPG",nextPoint:(-1)},E:{photo:"Day 3 (85).JPG",nextPoint:(-1)},S:{photo:"Day 3 (84).JPG",nextPoint:15},W:{photo:"Day 3 (83).JPG",nextPoint:17}},{N:{photo:"Day 1 (74).JPG",nextPoint:(-1)},E:{photo:"Day 1 (73).JPG",nextPoint:16},S:{photo:"Day 1 (72).JPG",nextPoint:18},W:{photo:"Day 1 (75).JPG",nextPoint:26}},{N:{photo:"Day 1 (69).JPG",nextPoint:17},E:{photo:"Day 1 (70).JPG",nextPoint:(-1)},S:{photo:"Day 1 (71).JPG",nextPoint:19},W:{photo:"Day 1 (68).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (65).JPG",nextPoint:18},E:{photo:"Day 1 (66).JPG",nextPoint:(-1)},S:{photo:"Day 1 (67).JPG",nextPoint:11},W:{photo:"Day 1 (64).JPG",nextPoint:20}},{N:{photo:"Day 2 (7).JPG",nextPoint:(-1)},E:{photo:"Day 2 (6).JPG",nextPoint:19},S:{photo:"Day 2 (5).JPG",nextPoint:(-1)},W:{photo:"Day 2 (8).JPG",nextPoint:21}},{N:{photo:"Day 2 (2).JPG",nextPoint:22},E:{photo:"Day 2 (3).JPG",nextPoint:20},S:{photo:"Day 2 (4).JPG",nextPoint:39},W:{photo:"Day 2 (1).JPG",nextPoint:32}},{N:{photo:"Day 2 (10).JPG",nextPoint:(-1)},E:{photo:"Day 2 (11).JPG",nextPoint:(-1)},S:{photo:"Day 2 (12).JPG",nextPoint:21},W:{photo:"Day 2 (9).JPG",nextPoint:23}},{N:{photo:"Day 2 (14).JPG",nextPoint:(-1)},E:{photo:"Day 2 (13).JPG",nextPoint:22},S:{photo:"Day 2 (16).JPG",nextPoint:(-1)},W:{photo:"Day 2 (15).JPG",nextPoint:24}},{N:{photo:"Day 2 (18).JPG",nextPoint:25},E:{photo:"Day 2 (19).JPG",nextPoint:23},S:{photo:"Day 2 (20).JPG",nextPoint:32},W:{photo:"Day 2 (17).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (81).JPG",nextPoint:(-1)},E:{photo:"Day 1 (82).JPG",nextPoint:26},S:{photo:"Day 1 (80).JPG",nextPoint:(-1)},W:{photo:"Day 1 (83).JPG",nextPoint:27}},{N:{photo:"Day 1 (79).JPG",nextPoint:(-1)},E:{photo:"Day 1 (78).JPG",nextPoint:17},S:{photo:"Day 1 (77).JPG",nextPoint:(-1)},W:{photo:"Day 1 (76).JPG",nextPoint:25}},{N:{photo:"Day 3 (70).JPG",nextPoint:(-1)},E:{photo:"Day 3 (73).JPG",nextPoint:25},S:{photo:"Day 3 (72).JPG",nextPoint:(-1)},W:{photo:"Day 3 (71).JPG",nextPoint:28}},{N:{photo:"Day 3 (67).JPG",nextPoint:27},E:{photo:"Day 3 (66).JPG",nextPoint:(-1)},S:{photo:"Day 3 (69).JPG",nextPoint:31},W:{photo:"Day 3 (68).JPG",nextPoint:29}},{N:{photo:"Day 3 (63).JPG",nextPoint:(-1)},E:{photo:"Day 3 (62).JPG",nextPoint:28},S:{photo:"Day 3 (65).JPG",nextPoint:(-1)},W:{photo:"Day 3 (64).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (58).JPG",nextPoint:29},E:{photo:"Day 3 (57).JPG",nextPoint:31},S:{photo:"Day 3 (60).JPG",nextPoint:(-1)},W:{photo:"Day 3 (59).JPG",nextPoint:50}},{N:{photo:"Day 3 (54).JPG",nextPoint:28},E:{photo:"Day 3 (53).JPG",nextPoint:(-1)},S:{photo:"Day 3 (56).JPG",nextPoint:33},W:{photo:"Day 3 (55).JPG",nextPoint:(-1)}},{N:{photo:"Day 2 (24).JPG",nextPoint:24},E:{photo:"Day 2 (21).JPG",nextPoint:21},S:{photo:"Day 2 (22).JPG",nextPoint:34},W:{photo:"Day 2 (23).JPG",nextPoint:33}},{N:{photo:"Day 3 (50).JPG",nextPoint:31},E:{photo:"Day 3 (51).JPG",nextPoint:32},S:{photo:"Day 3 (52).JPG",nextPoint:35},W:{photo:"Day 3 (49).JPG",nextPoint:(-1)}},{N:{photo:"Day 2 (28).JPG",nextPoint:32},E:{photo:"Day 2 (25).JPG",nextPoint:(-1)},S:{photo:"Day 2 (26).JPG",nextPoint:37},W:{photo:"Day 2 (27).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (46).JPG",nextPoint:33},E:{photo:"Day 3 (48).JPG",nextPoint:36},S:{photo:"Day 3 (47).JPG",nextPoint:40},W:{photo:"Day 3 (45).JPG",nextPoint:(-1)}},{N:{photo:"Day 2 (29).JPG",nextPoint:(-1)},E:{photo:"Day 2 (32).JPG",nextPoint:37},S:{photo:"Day 2 (31).JPG",nextPoint:(-1)},W:{photo:"Day 2 (30).JPG",nextPoint:35}},{N:{photo:"Day 2 (35).JPG",nextPoint:34},E:{photo:"Day 2 (36).JPG",nextPoint:38},S:{photo:"Day 2 (33).JPG",nextPoint:(-1)},W:{photo:"Day 2 (34).JPG",nextPoint:36}},{N:{photo:"Day 2 (39).JPG",nextPoint:39},E:{photo:"Day 2 (36).JPG",nextPoint:(-1)},S:{photo:"Day 2 (37).JPG",nextPoint:(-1)},W:{photo:"Day 2 (38).JPG",nextPoint:37}},{N:{photo:"Day 2 (41).JPG",nextPoint:21},E:{photo:"Day 2 (42).JPG",nextPoint:(-1)},S:{photo:"Day 2 (43).JPG",nextPoint:38},W:{photo:"Day 2 (40).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (36).JPG",nextPoint:35},E:{photo:"Day 3 (35).JPG",nextPoint:(-1)},S:{photo:"Day 3 (34).JPG",nextPoint:44},W:{photo:"Day 3 (33).JPG",nextPoint:41}},{N:{photo:"Day 3 (32).JPG",nextPoint:(-1)},E:{photo:"Day 3 (31).JPG",nextPoint:40},S:{photo:"Day 3 (30).JPG",nextPoint:42},W:{photo:"Day 3 (29).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (28).JPG",nextPoint:41},E:{photo:"Day 3 (27).JPG",nextPoint:43},S:{photo:"Day 3 (26).JPG",nextPoint:(-1)},W:{photo:"Day 3 (25).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (21).JPG",nextPoint:44},E:{photo:"Day 3 (22).JPG",nextPoint:53},S:{photo:"Day 3 (23).JPG",nextPoint:46},W:{photo:"Day 3 (24).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (39).JPG",nextPoint:40},E:{photo:"Day 3 (40).JPG",nextPoint:(-1)},S:{photo:"Day 3 (37).JPG",nextPoint:43},W:{photo:"Day 3 (38).JPG",nextPoint:45}},{N:{photo:"Day 3 (43).JPG",nextPoint:(-1)},E:{photo:"Day 3 (44).JPG",nextPoint:44},S:{photo:"Day 3 (42).JPG",nextPoint:(-1)},W:{photo:"Day 3 (41).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (18).JPG",nextPoint:43},E:{photo:"Day 3 (17).JPG",nextPoint:(-1)},S:{photo:"Day 3 (20).JPG",nextPoint:47},W:{photo:"Day 3 (19).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (16).JPG",nextPoint:46},E:{photo:"Day 3 (15).JPG",nextPoint:(-1)},S:{photo:"Day 3 (14).JPG",nextPoint:48},W:{photo:"Day 3 (13).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (10).JPG",nextPoint:47},E:{photo:"Day 3 (11).JPG",nextPoint:(-1)},S:{photo:"Day 3 (12).JPG",nextPoint:49},W:{photo:"Day 3 (9).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (8).JPG",nextPoint:48},E:{photo:"Day 3 (7).JPG",nextPoint:1},S:{photo:"Day 3 (6).JPG",nextPoint:(-1)},W:{photo:"Day 3 (5).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (96).JPG",nextPoint:29},E:{photo:"Day 3 (95).JPG",nextPoint:30},S:{photo:"Day 3 (94).JPG",nextPoint:30},W:{photo:"Day 3 (61).JPG",nextPoint:(-1)}},{N:{photo:"Day 1 (35).JPG",nextPoint:10},E:{photo:"Day 1 (34).JPG",nextPoint:(-1)},S:{photo:"Day 1 (33).JPG",nextPoint:7},W:{photo:"Day 1 (32).JPG",nextPoint:(-1)}},{N:{photo:"Day 3 (80).JPG",nextPoint:(-1)},E:{photo:"Day 3 (81).JPG",nextPoint:6},S:{photo:"Day 3 (78).JPG",nextPoint:(-1)},W:{photo:"Day 3 (79).JPG",nextPoint:53}},{N:{photo:"Day 3 (75).JPG",nextPoint:(-1)},E:{photo:"Day 3 (76).JPG",nextPoint:52},S:{photo:"Day 3 (77).JPG",nextPoint:(-1)},W:{photo:"Day 3 (74).JPG",nextPoint:43}},{N:{photo:"Day 1 (42).JPG",nextPoint:(-1)},E:{photo:"Day 1 (41).JPG",nextPoint:9},S:{photo:"Day 1 (40).JPG",nextPoint:(-1)},W:{photo:"Day 1 (43).JPG",nextPoint:10}},{N:{photo:"Day 1 (49).JPG",nextPoint:13},E:{photo:"Day 1 (50).JPG",nextPoint:(-1)},S:{photo:"Day 1 (51).JPG",nextPoint:9},W:{photo:"Day 1 (48).JPG",nextPoint:(-1)}},];var d=function(o,l){if(o==-1){g.alert({message:"這裡不能走！"})}else{var n=a+k[o][l].photo;var m=new Image();f=true;m.onload=function(){g("#street-div #mapPicture").attr("src",n).fadeIn(300);f=false};m.src=n;c=o;b=l;g("#street-div #mapPicture").fadeOut(300)}};var h=function(){d(k[c][b].nextPoint,b)};var j=function(){switch(b){case"N":b="W";break;case"E":b="N";break;case"S":b="E";break;case"W":b="S";break}d(c,b)};var e=function(){switch(b){case"N":b="E";break;case"E":b="S";break;case"S":b="W";break;case"W":b="N";break}d(c,b)};g.street=function(){var p=false;g(".picture").hide();g("#street-div #experience-personally").mousedown(function(){g(document).mousemove(n);p=true;return false});var o;var m=false;var n=function(r){g(".opacity-picture").css({opacity:0.5,});x=r.pageX-g("#street-div #back-div").offset().left;y=r.pageY-g("#street-div #back-div").offset().top;g("#street-div #experience-personally").css({top:y+2+"px",left:x+2+"px",})};g("#street-div .picture").mouseenter(function(){m=true;o=g(this).attr("id")});g("#street-div .picture").mouseleave(function(){m=false});var q=function(){g(".opacity-picture").css({opacity:1,});if(m&&p){if(g("#"+o).attr("streetPoints")==(-1)){g("#street-div #experience-personally").css({top:410,left:530,})}else{g("#street-div #experience-personally").css({zIndex:2,});g("#street-div #map-div, #street-div #curtain-close-div, #street-div #back-div").css({height:498,});g("#street-div #mapPicture").css({zIndex:"3",width:750,height:498,});g("#street-div .arrow").show();d(g("#"+o).attr("streetPoints"),g("#"+o).attr("faceto"));g("#street-div .street-pu").show();g("#street-div .arrow").eq(0).unbind("click").click(function(){if(!f){h()}});g("#street-div .arrow").eq(1).unbind("click").click(function(){if(!f){j()}});g("#street-div .arrow").eq(2).unbind("click").click(function(){if(!f){e()}});m=false}p=false}g(document).unbind("mousemove",n);g("#street-div #experience-personally").css({top:410,left:530,})};g(document).mouseup(q);g("#street-div .picture").hide();g("#street-div .landscape").show();var l=function(){g("#street-div .picture").hide();g("."+g(this).attr("show")).show()};g("#street-div .one-image").bind("click",l);g("#street-div .two-image").click(function(){g("#street-div .button-text").hide();g("#street-div .button-text[ detailItem = "+g(this).attr("detailItem")+"]").show()});g("#street-div .curtainOpen").click(function(){g("#street-div #experience-personally").css({zIndex:1,});g("#street-div #curtainDiv").animate({left:"370px"});g("#street-div .button-text").hide();g('#street-div .button-text[ detailItem = "department" ]').show();g("#street-div .one-image").unbind("click",l)});g("#street-div #curtainclose").click(function(){g("#street-div #curtainDiv").animate({left:"750px"});g("#street-div #experience-personally").css({zIndex:4,});g("#street-div .one-image").bind("click",l)});g("#street-div .arrow").eq(3).click(function(){g("#map-div img").hide();g("#street-div .arrow").hide();g("#street-div #map-div, #street-div #curtain-close-div, #street-div #back-div").css({height:552,});g("#street-div #mapPicture").css({width:601,height:552,zIndex:0,});g("#street-div #experience-personally").css({zIndex:3,});g("#street-div .street-loading").hide()});g("#street-div .picture, #street-div .button-text").click(function(){m=false;g("#street-div #back-div, #street-div #curtain-close-div").css({height:552,});g("#street-div #experience-personally").css({zIndex:2,});g("#text-container").dialog({width:680,height:400,modal:true,escape:false});g("#street-div .arrow").hide();g("#street-div #mapPicture").css({width:601,height:552,zIndex:0,});var r=g(this).attr("href").replace("#","");g.ajax({type:"GET",url:jQuery.configures.buildingContentUrl.replace(":id",r),dataType:"json",success:function(s){g("#building-text").html(s.content).scrollTo(0);g("#building-text img").css({cursor:"pointer",});g("#building-text img").each(function(){g(this).wrapAll(g("<a></a>").addClass("lightbox").attr("href",g(this).attr("src")).attr("title",g(this).attr("alt")))});g("#building-text a.lightbox").lightbox({hideOverlayBackground:true})},})});g("#street-div #building-text").scrollable({scrollableClass:"street-scrollable"})}})(jQuery);(function(a){a.nculife=function(){var b=function(){var c=a(this).attr("tab");var d=a(this).attr("page");jQuery.getJSON(jQuery.configures.ncuLifeUrl.replace(":tab",c).replace(":page",d),function(e){a("#nculife-content-view").html(e.content).scrollTo(0)});return false};a(".life-items li").click(function(){a("#life-dialog").dialog({dialogClass:"nculife-dialog",closeText:" ",});a("#life-dialog").removeClass();a("#life-dialog").addClass("nculife-dialog");a("#life-dialog").addClass(a(this).parents("ul").attr("pattern"));a("#nculife-title").removeClass();a("#nculife-title").addClass(a(this).parents("ul").attr("bar"));a("#nculife-content-view").empty();a("#nculife-dialog-head").empty();var c=a(this);if(c.hasClass("life-bar")){a(this).children().children().each(function(){var d=a("<a></a>").text(a(this).text()).attr("href","#").attr("class","").attr("tab",a(this).attr("tab")).attr("page",a(this).attr("page")).attr("title",a(this).text()).click(b);a("#nculife-dialog-head").append(d)});a("#nculife-title h4").text(a(this).children("span").text())}else{a(this).each(function(){var d=a("<a></a>").text(a(this).text()).attr("href","#").attr("class","").attr("tab",a(this).attr("tab")).attr("page",a(this).attr("page")).attr("title",a(this).text()).click(b);a("#nculife-dialog-head").append(d)});a("#nculife-title h4").text(a(this).text())}a("#nculife-dialog-head > a").first().click()});a("#nculife-content-view").scrollable({scrollableClass:false});a(".nculife-hover").mouseenter(function(){a(this).children("ul").stop().animate({height:a(this).attr("height")},500)});a(".nculife-hover").mouseleave(function(){a(this).children("ul").stop().animate({height:"0px"},500)});switch(window.location.hash.replace("#","")){case"play":a("#life-play").mouseenter();break;case"traffic":a("#life-traffic").mouseenter();break;case"school":a("#life-school").mouseenter();break;case"live":a("#life-live").mouseenter();break;case"health":a("#life-health").mouseenter();break}}})(jQuery);(function(a){a.readme=function(){var b=function(){var c=a(this).attr("tab");var d=a(this).attr("page");jQuery.getJSON(jQuery.configures.readMeUrl.replace(":tab",c).replace(":page",d),function(e){a(".readme-view").html(e.content).scrollTo(0)});return false};a(".readme-view").scrollable({scrollableClass:false});if(a(".readme-menu a").length==0){a(".readme-menu-index li").each(function(){var c=a("<li></li>").append(a("<a></a>").text(a(this).text()).attr("href","#").attr("tab",a(this).attr("tab")).attr("page",a(this).attr("page")).click(b));a("#readme .menu-index").append(c)});a(".readme-menu a").eq(0).click()}a("#readme-logo1").click(function(){a(".fresh-inner:hidden").fadeIn("slow");a(".reschool-inner:visible").fadeOut("fast");return false});a("#readme-logo2").click(function(){a(".reschool-inner:hidden").fadeIn("slow");a(".fresh-inner:visible").fadeOut("fast");return false});a(".readme-menu").mouseenter(function(){a(this).stop().animate({left:"0px"},500)});a(".readme-menu").mouseleave(function(){a(this).stop().animate({left:"-200px"},500)});switch(window.location.hash.replace("#","")){case"freshman":a("#readme-logo1").click();break;case"reschool":a("#readme-logo2").click();break}}})(jQuery);(function(a){a.clubs=function(){a("#menu-items a").lightbox();a("#calendar-button").click(function(){var c=a(this);if(c.hasClass("active")){a(".underpicture div").slideUp(300,function(){c.removeClass("active")})}else{a(".underpicture div").slideDown(300,function(){a("#calendar").css({overflow:"visible"});c.addClass("active")})}return false});if(a("#calendar div").length){var b=a.configures.calendarClubEventsUrl.replace(":id",a("#club > div").attr("id").replace("club-",""));a("#calendar div").calendar()}a("#club .back").click(function(){window.history.back()})}})(jQuery);(function(a){var b=false;a.fn.lightbox=function(s){var s=a.extend({lightboxId:"lightbox",lightboxOverlayId:"lightbox-overlay",lightboxContainerId:"lightbox-container",lightboxBoxId:"lightbox-box",lightboxLoadingId:"lightbox-loading",lightboxImageId:"lightbox-image",lightboxNavigationId:"lightbox-navigation",lightboxPrevId:"lightbox-prev",lightboxNextId:"lightbox-next",lightboxCloseId:"lightbox-close",lightboxDetailsId:"lightbox-details",lightboxCaptionId:"lightbox-caption",lightboxPageId:"lightbox-page",hideOverlayBackground:false,maxImageHeight:480,maxImageWidth:640,fixedNavigation:false,containerBorderSize:10,containerResizeSpeed:"slow",detailsSlideSpeed:"fast",textImage:"Image",textOf:"/",keyToClose:"c",keyToPrev:"p",keyToNext:"n",onBeforeShow:function(){return true},onShow:function(){},onBeforeHide:function(){return true},onHide:function(){}},s);var d=0;var k=[];var p=a(this);var n=function(){if(b){return false}if(s.onBeforeShow()){var B=a("<div></div>").css({height:a(window).height(),left:0,position:"fixed",top:0,width:a(window).width()}).overlay({onBeforeHide:o});var A=a("<div></div>").attr("id",s.lightboxId).click(function(){return B.close()}).appendTo(a("body"));var C=a("<div></div>").attr("id",s.lightboxBoxId).appendTo(A);var v=a("<div></div>").attr("id",s.lightboxLoadingId).appendTo(C);var w=a("<img />").attr("id",s.lightboxImageId).appendTo(C);var u=a("<div></div>").attr("id",s.lightboxNavigationId).appendTo(C);var z=a("<a></a>").attr("id",s.lightboxPrevId).attr("href","#").appendTo(u);var D=a("<a></a>").attr("id",s.lightboxNextId).attr("href","#").appendTo(u);var t=a("<div></div>").attr("id",s.lightboxDetailsId).appendTo(A);var G=a("<span></span>").attr("id",s.lightboxCaptionId).appendTo(t);var E=a("<span></span>").attr("id",s.lightboxPageId).appendTo(t);var F=a("<a></a>").attr("id",s.lightboxCloseId).attr("href","#").click(function(){return B.close()}).appendTo(t);d=0;k=[];b=true;p.each(function(I){var H=p.eq(I);k.push(new Array(H.attr("title"),H.attr("href")))});while(k[d][1]!=a(this).attr("href")){d++}B.getOverlay(B.index).attr("id",s.lightboxOverlayId);if(s.hideOverlayBackground){B.getOverlay(B.index).css({backgroundColor:"transparent"})}s.onShow();A.css({marginTop:-1*C.height()/2,top:"50%"});h()}return false};var q=function(){if(d!=0){d-=1;h()}return false};var c=function(){if(d!=(k.length-1)){d+=1;h()}return false};var o=function(){if(s.onBeforeHide()){s.onHide();a("#"+s.lightboxId).remove();b=false}return true};var h=function(){var t=new Image();if(!s.fixedNavigation){a("#"+s.lightboxNavigationId+", #"+s.lightboxPrevId+", #"+s.lightboxNextId).hide()}a("#"+s.lightboxImageId+", #"+s.lightboxDetailsId+", #"+s.lightboxPageId).hide();t.onload=function(){var u=t.height;var v=t.width;a("#"+s.lightboxImageId).attr("src",k[d][1]);if(t.width>0&&t.height>0){if(v/u>=s.maxImageWidth/s.maxImageHeight){if(v>s.maxImageWidth){t.width=s.maxImageWidth;t.height=(u*s.maxImageWidth)/v}}else{if(u>s.maxImageHeight){t.height=s.maxImageHeight;t.width=(v*s.maxImageHeight)/u}}}r(t.width,t.height)};t.src=k[d][1]};var r=function(v,t){var u=a("#"+s.lightboxBoxId).width();var C=a("#"+s.lightboxBoxId).height();var A=(v+(s.containerBorderSize*2));var z=(t+(s.containerBorderSize*2));var B=u-A;var w=C-z;a("#"+s.lightboxId).css({marginTop:-1*z/2});a("#"+s.lightboxDetailsId).css({width:v});a("#"+s.lightboxPrevId+", #"+s.lightboxNextId).css({height:z});a("#"+s.lightboxBoxId).animate({height:z,width:A},s.containerResizeSpeed,f);if((B==0)&&(w==0)){a.pause(a.browser.msie?250:100)}};var f=function(){a("#"+s.lightboxImageId).fadeIn(function(){m();a("#"+s.lightboxNavigationId).show();if(d!=0){a("#"+s.lightboxPrevId).unbind().bind("click",q).show()}if(d!=(k.length-1)){a("#"+s.lightboxNextId).unbind().bind("click",c).show()}});j()};var m=function(){a("#"+s.lightboxCaptionId).hide();if(k[d][0]){a("#"+s.lightboxCaptionId).html(k[d][0]).show()}if(k.length>1){a("#"+s.lightboxPageId).html(s.textImage+" "+(d+1)+" "+s.textOf+" "+k.length).show()}a("#"+s.lightboxDetailsId).slideDown(s.detailsSlideSpeed)};var j=function(){if(d>0){var u=new Image();u.src=k[d-1][1]}if((k.length-1)>d){var t=new Image();t.src=k[d+1][1]}e()};var e=function(){a(document).bind("keydown",l)};var g=function(){a(document).unbind("keydown",l)};var l=function(u){var t=String.fromCharCode(u.keyCode).toLowerCase();if((t==s.keyToClose.toLowerCase())||(t=="x")||(u.keyCode==27)){o()}if((t==s.keyToPrev.toLowerCase())||(u.keyCode==37)){q();g()}if((t==s.keyToNext.toLowerCase())||(u.keyCode==39)){c();g()}};return this.unbind("click").click(n)}})(jQuery);(function(){var b=null;var a=[];var d;var c=function(g,h,f,j){var e=function(k,l){if(k.length>=l){return k}return e("0"+k,l)};b.val(g+"-"+e(h.toString(),2)+"-"+e(f.toString(),2)).change();$.datepicker.fadeOut();if(j){j()}};$.datepicker={};$.fn.datepicker=function(g){var f=$.extend({year:(new Date()).getFullYear(),month:(new Date()).getMonth()+1,},g);if(!this.length){return this}if(!d){var e=function(h,j){return $.generateCalendar({year:h,month:j,right:true,rightClick:function(){if(++j>12){h+=1;j=1}$("#datepicker table").detach();e(h,j);return false},left:true,leftClick:function(){if(--j<1){h-=1;j=12}$("#datepicker table").detach();e(h,j);return false},dayClick:function(){var k=$(this);c(h,j,$(this).data("day"),function(){k.parent().parent().find("td").removeClass("selected");k.addClass("selected")})},dayEnter:function(){$(this).addClass("hover")},dayLeave:function(){$(this).removeClass("hover")}}).appendTo($.datepicker).find("caption a:eq(1)").text(h+"年"+j+"月");return calendar};$.datepicker=$("<div></div>").attr("id","datepicker").hide().appendTo($("body"));e(f.year,f.month);d=true}this.parents("form").find("input, textarea").focus(function(){$(a).each(function(h,j){j.blur()});$.datepicker.fadeOut()});return this.each(function(){a[a.length]=$(this).prop("readonly",true);$(this).focus(function(){b=$(this).blur();$.datepicker.css({left:$(this).offset().left+$(this).width(),top:$(this).offset().top+$(this).height()});$.datepicker.stop(true,true).fadeIn();return true})})}})(jQuery);(function(a){a.multimedia=function(){var d;var c=function(f){if(typeof(c.mousein)=="undefined"){c.mousein=false}var e=parseInt(a(d).css("margin-top"));if(e+f>c.margin_top_max()){e=c.margin_top_max();c.mousein=false;a(d).css("margin-top",e)}if(e+f<c.margin_top_min()){e=c.margin_top_min();c.mousein=false;a(d).css("margin-top",e)}if(c.mousein){a(d).css("margin-top",e+f);setTimeout(function(){c(f)},30)}else{return}};a("#multimedia .menu a").each(function(g,h){var f="http://img.youtube.com/vi/:id/0.jpg";var e=a(this).attr("href").substr(1);var k=a("<span></span>").text(a(this).text());var j=a("<img />").attr("src",f.replace(":id",e));a(this).html(k).append(j)});a("#multimedia .items").each(function(){a(this).height(a(this).find("a").length*a(this).find("a").height())});a("#multimedia .menu a").click(function(){var e=a.configures.multimediaYoutubeUrl.replace(":v",a(this).attr("href").substr(1));a("#multimedia-frame").attr("src",e);a.getJSON(a.configures.multimediaIntroductionUrl.replace(":v",a(this).attr("href").substr(1)),function(f){a("#multimedia .introduction").text(f.introduction)});return false});a("#multimedia .menu a").eq(a.random(0,a("#multimedia .menu .items a").length-1)).click();var b=10;c.margin_top_max=function(){return 0};c.margin_top_min=function(){return a("#multimedia .menu").height()-a(d).height()};a("#multimedia .up").mouseenter(function(){c.mousein=true;c(b)}).mouseleave(function(){c.mousein=false});a("#multimedia .down").mouseenter(function(){c.mousein=true;c(-1*b)}).mouseleave(function(){c.mousein=false});a("#multimedia .tab").click(function(){var e=a(this).attr("href").replace("#","");a("#multimedia .tab").removeClass("active");a(this).addClass("active");a("#multimedia .items").hide();a("#multimedia #items"+e).show();d=a("#multimedia #items"+e)});a("#multimedia .tab").first().click();a.konami({complete:function(){var e=a.configures.multimediaYoutubeUrl.replace(":v","vcMVddGa0LU");a("#multimedia-frame").attr("src",e);a.getJSON(a.configures.multimediaIntroductionUrl.replace(":v","vcMVddGa0LU"),function(f){a("#multimedia .introduction").text(f.introduction)});return false}})}})(jQuery);(function(a){a.game=function(){a(".game-display").scrollable({});var b=0;a("#game-mission a").click(function(){b=a(this).attr("href").replace("#","");a("#game-mission-dialog").dialog({height:600,width:900});a.getJSON(a.configures.gameMissionUrl.replace(":id",b),function(c){a("#game-mission-dialog .MissionName").text(c.name);a("#game-mission-dialog .display").text(c.content)});return false});a("#game-mission-dialog form").submit(function(){if(a(this).find("input[name=answer]").val()==""){return false}a("#game-mission-dialog form input, #game-mission-dialog form button").prop("disabled",true);a.post(a.configures.gameSolveUrl.replace(":id",b),{answer:a(this).find("input[name=answer]").val(),token:a.configures.token},function(d){var c=a("#game-mission-"+(d.result?"correct":"wrong")).get(0);if(c.play){c.play()}a.alert({message:d.result?"恭喜您～答對囉！獲取了金幣與經驗值":"答錯囉～請再接再厲",confirmed:function(){a("#game-mission-dialog form input, #game-mission-dialog form button").prop("disabled",false);if(d.result){window.location.reload()}}});a.configures.token=d.token});a(this).find("input[name=answer]").val("");return false});a(".item-description,.mission-description").each(function(){var c=a(this).parent();var d=a(this).detach();c.data("description",d.appendTo(a("body")));c.hover(function(){var e=a(this).data("description");e.css({left:a(this).offset().left,top:a(this).offset().top});e.stop(true,true).fadeIn()},function(){var e=a(this).data("description");e.stop(true,true).fadeOut()})});a(".own-items").click(function(){var c=a(this);a.confirm({message:"您確定要裝備或卸載此物品嗎？",confirmed:function(d){if(d){window.location=c.attr("href")}}});return false});a(".shop-items").click(function(){var c=a(this);a.confirm({message:"您確定要購買或是裝備此物品嗎？",confirmed:function(d){if(d){window.location=c.attr("href")}}});return false})}})(jQuery);(function(b){var a=[];b.friends=function(){var c=false;b(".a-group-users, .users-group, #new-group-members").scrollable();b(".button-all-choose").click(function(){c=!c;b('input[type="checkbox"][name^="friends"], input[type="checkbox"][name^="group-members"]').each(function(){b(this).prop("checked",c)});b('input[type="checkbox"][name^="friends"]').change();b('input[type="checkbox"][name^="group-members"]').change();return false});b("#same-department-diff-grade-search, #other-department-search, #same-department-same-grade-search, #request-search, #new-group-search, #mygroup-search, #myfriend-search, #newmember-search").keyup(function(){var d=b(this).val().toLowerCase();b(a).each(function(e,f){if(f[0].toLowerCase().search(d)==0){f[1].show()}else{f[1].hide()}})});b("p.user-name").each(function(){a[a.length]=[b(this).text(),b(this).parent()]});b(".friends-search").submit(function(){return false})}})(jQuery);(function(a){a.profile=function(){a(".allmessages, #my-all-messages, #self-messages-content, #friend-chatting, .friend-chatting-content").scrollable();a(".button-viewProfile-back").click(function(){window.history.back()})}})(jQuery);(function(a){a.ncufresh=function(){a(".loading").sprite();a("input.datepicker:not(#form-register-birthday, #form-editor-birthday)").datepicker();a("#form-register-birthday, #form-editor-birthday").datepicker({year:1994,month:8});a("#form-sidebar-register, #form-login-register").click(function(){window.location.href=a.configures.registerUrl;return false});a("#sidebar-personal-toggle").click(function(){var b=a(this);if(b.hasClass("active")){a("#sidebar-personal").slideUp(300,function(){b.removeClass("active")})}else{a("#sidebar-personal").slideDown(300,function(){b.addClass("active")})}return false});a("form dt label").infield();a("form dd > span").each(function(){var b=a(this);b.prepend(a("<span></span>").addClass("arrow"));if(a(b).css("display")==="none"){a(b).parent().parent().hover(function(){if(a(this).find("input:focus").length===0){a(b).stop(true,true).fadeIn()}},function(){if(a(this).find("input:focus").length===0){a(b).stop(true,true).fadeOut()}}).find("input").focus(function(){a(b).stop(true,true).fadeIn()}).blur(function(){a(b).stop(true,true).fadeOut()})}});a('form input[type="radio"]').each(function(b){var c=a("<span></span>").addClass("radio").mousedown(function(){a('input[type="radio"][name="'+a(this).prev().prop("checked",true).attr("name")+'"]').each(function(){a(this).next().removeClass("checked")});a(this).addClass("checked")}).insertAfter(a(this));a(this).css({display:"none",height:"auto",width:"auto"}).change(function(){a('input[type="radio"][name="'+a(this).attr("name")+'"]').each(function(){if(a(this).prop("checked")){a(this).next().addClass("checked")}else{a(this).next().removeClass("checked")}})});if(a(this).prop("checked")){a(this).next().addClass("checked")}});a('form input[type="checkbox"]').each(function(b){var c=a("<span></span>").addClass("checkbox").mousedown(function(){if(a(this).hasClass("checked")){a(this).prev().prop("checked",false);a(this).removeClass("checked")}else{a(this).prev().prop("checked",true);a(this).addClass("checked")}}).insertAfter(a(this));a(this).css({display:"none",height:"auto",width:"auto"}).change(function(){if(a(this).prop("checked")){a(this).next().addClass("checked")}else{a(this).next().removeClass("checked")}console.log(a(this).prop("checked"))});if(a(this).prop("checked")){a(this).next().addClass("checked")}});a("a").live("click",function(){var b=a(this).attr("href");if((b.match(/^\/.+/)||b.match(/^#.*/)||b.search(location.hostname)>=0)&&a(this).attr("rel")!=="external"){return true}window.open(b);return false})}})(jQuery);(function(a){a.site=function(){var e=100/5;var f=a("#form-password-meter");var g=parseInt(f.css("margin-top"));var d=function(K){var j=4;var U=4;var V=6;var w=2;var r=2;var W=2;var Q=2;var R=3;var J=3;var O=3;var q="";var I="";var X="";var z="";var u=0;var M=false;var P=0;var F=0;var D=0;var m=0;var h=0;var A=0;var E=0;var v=0;var o=0;var p=0;var l=0;var B=0;var L=0;var H=0;var s=0;var C=K.length;var k=parseInt(C*j);var n=K.replace(/\s+/g,"").split(/\s*/);for(var G=0;G<n.length;++G){if(n[G].match(/[A-Z]/g)){if(q!==""){if((q+1)==G){v++}}q=G;P++}else{if(n[G].match(/[a-z]/g)){if(I!==""){if((I+1)==G){o++}}I=G;F++}else{if(n[G].match(/[0-9]/g)){if(G>0&&G<(n.length-1)){D++}if(X!==""){if((X+1)==G){p++}}X=G;m++}else{if(n[G].match(/[^a-zA-Z0-9_]/g)){if(G>0&&G<(n.length-1)){D++}if(z!==""){if((z+1)==G){l++}}z=G;h++}}}}for(var S=0;S<n.length;++S){if(n[G]==n[S]&&G!=S){M=true;u+=Math.abs(n.length/(S-G))}}if(M){A++;E=n.length-A;u=(E)?Math.ceil(u/E):Math.ceil(u)}}for(var S=0;S<23;++S){var N="abcdefghijklmnopqrstuvwxyz".substring(S,parseInt(S+3));var T=N.reverse();if(K.toLowerCase().indexOf(N)!=-1||K.toLowerCase().indexOf(T)!=-1){B++;s++}}for(var S=0;S<8;++S){var N="01234567890".substring(S,parseInt(S+3));var T=N.reverse();if(K.toLowerCase().indexOf(N)!=-1||K.toLowerCase().indexOf(T)!=-1){L++;s++}}for(var S=0;S<8;++S){var N=")!@#$%^&*()".substring(S,parseInt(S+3));var T=N.reverse();if(K.toLowerCase().indexOf(N)!=-1||K.toLowerCase().indexOf(T)!=-1){H++;s++}}if(P>0&&P<C){k+=parseInt((C-P)*2)}if(F>0&&F<C){k+=parseInt((C-F)*2)}if(m>0&&m<C){k+=parseInt(m*U)}if(h>0){k+=parseInt(h*V)}if(D>0){k+=parseInt(D*w)}if((F>0||P>0)&&h===0&&m===0){k-=parseInt(C)}if(F===0&&P===0&&h===0&&m>0){k-=parseInt(C)}if(A>0){k-=parseInt(u)}if(v>0){k-=parseInt(v*r)}if(o>0){k-=parseInt(o*W)}if(p>0){k-=parseInt(p*Q)}if(B>0){k-=parseInt(B*R)}if(L>0){k-=parseInt(L*J)}if(H>0){k-=parseInt(H*O)}if(C<8){k/=2}if(k>100){k=100}if(k<0){k=0}return k};var b=["#FF0000","#F79F1D","#EAF722","#99E653","#3AF463"];var c=function(){if(a(this).val()!==""){var j=d(a(this).val());var k=parseInt(j/e)+1;f.find("td").css({backgroundColor:"transparent"});for(var h=0;h<k;++h){f.find("td").eq(h).css({backgroundColor:b[k-1]})}}};if(a("#form-register-password").length){c.call(a("#form-register-password").keyup(c).keydown(c))}if(a("#marquee").length){a("#marquee").marquee()}if(a("#index-calendar").length){a("#index-calendar div").calendar(a.configures.calendarEventsUrl)}a.konami({complete:a.ultimatePassword})}})(jQuery);(function(a){a.about=function(h){var h=a.extend({aboutId:"about",titleClass:"title",introdutionBlock:"itrodution-block",introdutionPicture:"about-picture",photoUl:"photo-ul",introduceId:"introdution",tagBar:"tag-bar",animationClass:"animation",block1InfClass:"about-block1Inf",tagClass:"tag",tagTxtClass:"tag-txt",title1Class:"title1",title2Class:"title2",PictureBarSpeed:1000,PictureAutoSpeed:6000,tagBarSpeed:30000},h);var p=0;var e=[a("#"+h.aboutId+" .button-left"),a("#"+h.aboutId+" .button-right")];var D=a("#"+h.aboutId+" img");var v=0;var m=a("."+h.tagBar+" .tag-image").each(function(E){a(this).addClass("tag-bar"+E)});var b=a("."+h.tagBar+" .person");var r=a("<p></p>").addClass("tag-box-name").hide();var l=a("<p></p>").addClass("tag-box-grade").hide();var j=31;var z=0;var c=a("#"+h.aboutId+" a");var s=true;var C=false;var u=false;var q=function(){m.each(function(){a(this).hide()});o.each(function(){a(this).hide()});o.eq(v).show();b.each(function(){a(this).hide()});for(var E=0;E<9;E++){b.eq(v*9+E).show();if(v==4&&E==1){break}}m.eq(v).show()};var B=[a("#"+h.aboutId+" .block1"),a("#"+h.aboutId+" .block2")];var A=a("#"+h.aboutId+" ."+h.introdutionPicture);var n=a("<div></div>").css({borderRadius:10,background:"url('"+c.eq(1).attr("href")+"')",height:300,width:400}).mouseenter(function(){w.show().stop().animate({height:50,opacity:1},h.PictureBarSpeed)}).mouseleave(function(){w.stop().animate({height:0,opacity:0},h.PictureBarSpeed)}).appendTo(A);var w=a("<div></div>").addClass("about-display").hide().appendTo(n);var d=a("<div></div>").addClass("photo-bar").appendTo(w);var k=a("#"+h.aboutId+" ."+h.introdutionBlock).appendTo(B[0]);var f=a("<div></div>").addClass("about-block1Picture").appendTo(B[1]);var g=a("#"+h.aboutId+" ."+h.tagClass).appendTo(B[1]);var t=a("#"+h.aboutId+" ."+h.tagTxtClass).appendTo(B[1]);var o=a("#"+h.aboutId+" ."+h.block1InfClass);o.each(function(){a(this).hide().appendTo(t)});m.each(function(E){a(this).addClass("about-tagbar").hide().appendTo(g)});a("#"+h.aboutId+" ."+h.animationClass).each(function(E){a(this).addClass("about-small-"+E).mouseenter(function(){if(E!=0){a(this).css({cursor:"pointer"})}}).click(function(){if(E==0){return false}s=false;for(var F=0;F<5;F++){o.eq(F).hide()}v=E-1;q()}).appendTo(f)});b.each(function(){a(this).css({position:"absolute",top:45+parseInt(a(this).attr("top")),left:67+parseInt(a(this).attr("left")),height:a(this).attr("height"),width:a(this).attr("width"),}).mouseenter(function(){var E=a(this);a(this).css({border:"5px solid white"});r.text(E.attr("name")).show().appendTo(E);l.text(E.attr("grade")).show().appendTo(E)}).mouseleave(function(){a(this).css({border:""});r.hide();l.hide()}).hide().appendTo(g)});q();setInterval(function(){if(p<j-1){p++}else{p=0}n.css("background-image","url('"+c.eq(p).attr("href")+"')")},h.PictureAutoSpeed);setInterval(function(){if(C){if(z+6<j){z++;a("#"+h.aboutId+" ."+h.photoUl).stop().animate({left:-40+z*-50})}}else{if(u){if(z>0){z--;a("#"+h.aboutId+" ."+h.photoUl).stop().animate({left:-40+z*-50})}}}},300);setInterval(function(){if(s){if(v<5){v++}else{v=0}q()}},h.tagBarSpeed);a("#"+h.aboutId+" ."+h.title1Class).appendTo(a("#"+h.aboutId));B[0].appendTo(a("#"+h.aboutId));a("#"+h.aboutId+" ."+h.title2Class).appendTo(a("#"+h.aboutId));B[1].appendTo(a("#"+h.aboutId));D.each(function(E){if(E<j){a(this).addClass("about-photos").mouseenter(function(){a(this).css("cursor","pointer")}).click(function(){p=E;n.css({background:"url('"+c.eq(E).attr("href")+"')"})})}});a("#"+h.aboutId+" ."+h.photoUl).appendTo(d).show();e[0].css({left:0,position:"absolute"}).mouseenter(function(){u=true}).mouseleave(function(){u=false}).appendTo(w).show();e[1].css({left:350,position:"absolute"}).mouseenter(function(){C=true}).mouseleave(function(){C=false}).appendTo(w).show();c.each(function(E){a(this).click(function(){n.css({background:"url('"+a(this).attr("href")+"')"});return false})})}})(jQuery);(function(a){a.forum=function(){a("#forum-reply-content").keydown(function(){var f=20;if(a(this).val().length<f){a(".reply-submit").attr("disabled","")}else{a(".reply-submit").removeAttr("disabled")}});a(".article-delete").click(function(){a(".form-delete input").attr("value",a(this).attr("href").replace("#",""));if(confirm("刪除文章?")){a(".form-delete").submit()}return false});a(".profile-add-friend a").click(function(){var f=[];var g=a(this).attr("class");f[0]=a(this).attr("href").replace("#","");a.post(a.configures.makeFriendUrl,{friends:f,token:a.configures.token},function(h){if(h.result==true){a("<span></span>").text("已送出邀請").replaceAll(a(".profile-add-friend ."+g));alert("已經送出好友邀請!")}a.configures.token=h.token})});a("#forum-forum-top2 .sort-list").change(function(){var f=a.configures.forumSortUrl;console.log(f);window.location=f.replace(":sort",a(this).val())});var e=20;var b=20;counter=[];var d=a("#forum-create-text-number-check").html();function c(){a("#forum-create-submit").attr("disabled","");check=0;for(i=0;i<2;i++){if(counter[i]!=1){return false}else{if(counter[i]==1){check=1}}}if(check==1){return true}}a("#forum-create-title").keydown(function(){if(a(this).val().length>e){counter[0]=0;a(this).val(a(this).val().substr(0,e));if(c()==false){a("#forum-create-submit").attr("disabled","");a(".form-top p").html(d+" <strong>"+c()+"</strong>")}}else{if(a(this).val().length<e&&a(this).val().length>0){counter[0]=1;if(!c()){a(".form-top p").html(d+" <strong>文章字數須滿10字以上喔!</strong>")}if(c()==true){a("#forum-create-submit").removeAttr("disabled")}}}});a("#form-create-content").keydown(function(){if(a(this).val().length<b){counter[1]=0;a(this).val(a(this).val().substr(0,b));if(c()==false){a("#forum-create-submit").attr("disabled","");a(".form-top p").html(d+" <strong>文章內容字數不足</strong>")}}else{counter[1]=1;a("#forum-create-text-number-check").html(d);if(c()==true){a("#forum-create-submit").removeAttr("disabled");a(".form-top p").html(d)}}});a(".forum-cancel-button").click(function(){a.confirm({message:"確定取消編輯此篇文章？",confirmed:function(f){if(f){window.location=a.configures.forumCancelUrl}return false}});return false})}})(jQuery);(function(a){a(document).ready(function(){a.configures.lasttime=0;a.configures.sequence=a.random(0,1000);a.ncufresh();a("#header").star();a("#moon").moon();if(a("#chat").length){a("#chat").chat()}if(a("#site").length){a.site()}if(a("#club").length){a.clubs()}if(a("#game").length){a.game()}if(a("#friends").length){a.friends()}if(a("#profile").length){a.profile()}if(a("#nculife").length){a.nculife()}if(a("#forum").length){a.forum()}if(a("#readme").length){a.readme()}if(a("#street").length){a.street()}if(a("#multimedia").length){a.multimedia()}if(a(".calendar-create").length){a.calendarCreate()}if(a("#calendar-recycle").length){a.calendarRecycle()}if(a("#personal-calendar").length){a.calendarView()}if(a("#calendar-subscript").length){a.calendarSubscript()}if(a("#calendar-club").length){a.calendarClub()}if(a("#calendar-event").length){a.calendarEvent()}if(a("#about").length){a.about()}a.pull.start({friendcounter:a("#chat .friendcounts"),onlinecounter:a("#header .online"),browseredcounter:a("#header .browsered")});a.push.start()});a("<script><\/script>").attr("id","facebook-jssdk").attr("async","async").attr("type","text/javascript").attr("src","//connect.facebook.net/zh_TW/all.js").insertBefore(a("script").first());window.fbAsyncInit=function(){var b=a("<div></div>").attr("id","fb-like").appendTo(a("#fb-root"));a("<fb:like></fb:like>").attr("href",a.configures.ncuFreshWebUrl).attr("data-send","false").attr("data-layout","button_count").attr("data-show-faces","false").appendTo(b);FB.init({appId:a.configures.facebookAppId,channelUrl:a.configures.facebookChannelUrl,status:true,cookie:true,xfbml:true})};google.setOnLoadCallback(function(){google.search.CustomSearchControl.attachAutoCompletion(a.configures.googleSearchAppId,a("#form-search-query").get(0),"search")})})(jQuery);google.load("search","1",{language:"zh_TW"});